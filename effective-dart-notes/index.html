<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="阅读 Effective Dart 时做的一些笔记。  Style Guide好代码一定是遵循良好代码风格的代码。前后一致的命名、排序和格式化使得代码具有更高的可读性。在整个 Dart 生态中维持一个规范统一的代码风格，可以使得程序员之间分享彼此的代码时，更容易阅读和互相学习。 IdentifiersDart 中标识符有三种类型：  UpperCamelCase：大驼峰命名法，每个单词首字母大">
<meta property="og:type" content="article">
<meta property="og:title" content="Effective Dart 学习笔记">
<meta property="og:url" content="https://ajiew.me/effective-dart-notes/index.html">
<meta property="og:site_name" content="aJIEw">
<meta property="og:description" content="阅读 Effective Dart 时做的一些笔记。  Style Guide好代码一定是遵循良好代码风格的代码。前后一致的命名、排序和格式化使得代码具有更高的可读性。在整个 Dart 生态中维持一个规范统一的代码风格，可以使得程序员之间分享彼此的代码时，更容易阅读和互相学习。 IdentifiersDart 中标识符有三种类型：  UpperCamelCase：大驼峰命名法，每个单词首字母大">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://ajiew.me/assets/2021-05-15/cover.png">
<meta property="article:published_time" content="2021-04-10T12:30:00.000Z">
<meta property="article:modified_time" content="2023-03-13T13:29:42.733Z">
<meta property="article:author" content="aJIEw">
<meta property="article:tag" content="Notes">
<meta property="article:tag" content="Dart">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ajiew.me/assets/2021-05-15/cover.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Effective Dart 学习笔记</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/true" title="aJIEw" type="application/atom+xml" />
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/blog/">Writing</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/flutter-notes/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/dart-notes/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://ajiew.me/effective-dart-notes/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://ajiew.me/effective-dart-notes/&text=Effective Dart 学习笔记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
<!--   <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li> -->
<!--   <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://ajiew.me/effective-dart-notes/&is_video=false&description=Effective Dart 学习笔记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=Effective Dart 学习笔记&body=Check out this article: https://ajiew.me/effective-dart-notes/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
<!--   <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li> -->
<!--   <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-digg " aria-hidden="true"></i></a></li> -->
<!--   <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://ajiew.me/effective-dart-notes/&name=Effective Dart 学习笔记&description=&lt;p&gt;&lt;img src=&#34;/assets/2021-05-15/cover.png&#34; alt=&#34;cover&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;阅读 &lt;a href=&#34;https://dart.dev/guides/language/effective-dart&#34;&gt;Effective Dart&lt;/a&gt; 时做的一些笔记。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;Style-Guide&#34;&gt;&lt;a href=&#34;#Style-Guide&#34; class=&#34;headerlink&#34; title=&#34;Style Guide&#34;&gt;&lt;/a&gt;Style Guide&lt;/h2&gt;&lt;p&gt;好代码一定是遵循良好代码风格的代码。前后一致的命名、排序和格式化使得代码具有更高的可读性。在整个 Dart 生态中维持一个规范统一的代码风格，可以使得程序员之间分享彼此的代码时，更容易阅读和互相学习。&lt;/p&gt;
&lt;h3 id=&#34;Identifiers&#34;&gt;&lt;a href=&#34;#Identifiers&#34; class=&#34;headerlink&#34; title=&#34;Identifiers&#34;&gt;&lt;/a&gt;Identifiers&lt;/h3&gt;&lt;p&gt;Dart 中标识符有三种类型：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UpperCamelCase：大驼峰命名法，每个单词首字母大写。&lt;/li&gt;
&lt;li&gt;lowerCamelCase：小驼峰命名法，除了首个单词，其余每个单词首字母大写。&lt;/li&gt;
&lt;li&gt;lowercase_with_underscores：带下划线的小写命名法，每个单词小写，用下划线分割单词。&lt;/li&gt;
&lt;/ul&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li> -->
<!--   <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://ajiew.me/effective-dart-notes/&t=Effective Dart 学习笔记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li> -->
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Style-Guide"><span class="toc-number">1.</span> <span class="toc-text">Style Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Identifiers"><span class="toc-number">1.1.</span> <span class="toc-text">Identifiers</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-name-types-using-UpperCamelCase"><span class="toc-number">1.1.1.</span> <span class="toc-text">DO name types using UpperCamelCase.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-name-libraries-packages-directories-and-source-files-using-lowercase-with-underscores"><span class="toc-number">1.1.2.</span> <span class="toc-text">DO name libraries, packages, directories, and source files using lowercase_with_underscores.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-name-import-prefixes-using-lowercase-with-underscores"><span class="toc-number">1.1.3.</span> <span class="toc-text">DO name import prefixes using lowercase_with_underscores.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-name-other-identifiers-using-lowerCamelCase"><span class="toc-number">1.1.4.</span> <span class="toc-text">DO name other identifiers using lowerCamelCase.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-lowerCamelCase-for-constant-names"><span class="toc-number">1.1.5.</span> <span class="toc-text">PREFER using lowerCamelCase for constant names.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-capitalize-acronyms-and-abbreviations-longer-than-two-letters-like-words"><span class="toc-number">1.1.6.</span> <span class="toc-text">DO capitalize acronyms and abbreviations longer than two letters like words.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-etc-for-unused-callback-parameters"><span class="toc-number">1.1.7.</span> <span class="toc-text">PREFER using _, __, etc. for unused callback parameters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-a-leading-underscore-for-identifiers-that-aren%E2%80%99t-private"><span class="toc-number">1.1.8.</span> <span class="toc-text">DON’T use a leading underscore for identifiers that aren’t private.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-prefix-letters"><span class="toc-number">1.1.9.</span> <span class="toc-text">DON’T use prefix letters.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ordering"><span class="toc-number">1.2.</span> <span class="toc-text">Ordering</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-place-%E2%80%9Cdart-%E2%80%9D-imports-before-other-imports"><span class="toc-number">1.2.1.</span> <span class="toc-text">DO place “dart:” imports before other imports.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-place-%E2%80%9Cpackage-%E2%80%9D-imports-before-relative-imports"><span class="toc-number">1.2.2.</span> <span class="toc-text">DO place “package:” imports before relative imports.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-specify-exports-in-a-separate-section-after-all-imports"><span class="toc-number">1.2.3.</span> <span class="toc-text">DO specify exports in a separate section after all imports.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-sort-sections-alphabetically"><span class="toc-number">1.2.4.</span> <span class="toc-text">DO sort sections alphabetically.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Formatting"><span class="toc-number">1.3.</span> <span class="toc-text">Formatting</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-format-your-code-using-dart-format"><span class="toc-number">1.3.1.</span> <span class="toc-text">DO format your code using dart format.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-changing-your-code-to-make-it-more-formatter-friendly"><span class="toc-number">1.3.2.</span> <span class="toc-text">CONSIDER changing your code to make it more formatter-friendly.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-lines-longer-than-80-characters"><span class="toc-number">1.3.3.</span> <span class="toc-text">AVOID lines longer than 80 characters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-curly-braces-for-all-flow-control-statements"><span class="toc-number">1.3.4.</span> <span class="toc-text">DO use curly braces for all flow control statements.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Documentation-Guide"><span class="toc-number">2.</span> <span class="toc-text">Documentation Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Comment"><span class="toc-number">2.1.</span> <span class="toc-text">Comment</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-format-comments-like-sentences"><span class="toc-number">2.1.1.</span> <span class="toc-text">DO format comments like sentences.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-block-comments-for-documentation"><span class="toc-number">2.1.2.</span> <span class="toc-text">DON’T use block comments for documentation.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Doc-comments"><span class="toc-number">2.2.</span> <span class="toc-text">Doc comments</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-doc-comments-to-document-members-and-types"><span class="toc-number">2.2.1.</span> <span class="toc-text">DO use &#x2F;&#x2F;&#x2F; doc comments to document members and types.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-writing-doc-comments-for-public-APIs"><span class="toc-number">2.2.2.</span> <span class="toc-text">PREFER writing doc comments for public APIs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-writing-a-library-level-doc-comment"><span class="toc-number">2.2.3.</span> <span class="toc-text">CONSIDER writing a library-level doc comment.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-writing-doc-comments-for-private-APIs"><span class="toc-number">2.2.4.</span> <span class="toc-text">CONSIDER writing doc comments for private APIs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-start-doc-comments-with-a-single-sentence-summary"><span class="toc-number">2.2.5.</span> <span class="toc-text">DO start doc comments with a single-sentence summary.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-separate-the-first-sentence-of-a-doc-comment-into-its-own-paragraph"><span class="toc-number">2.2.6.</span> <span class="toc-text">DO separate the first sentence of a doc comment into its own paragraph.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-redundancy-with-the-surrounding-context"><span class="toc-number">2.2.7.</span> <span class="toc-text">AVOID redundancy with the surrounding context.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-starting-function-or-method-comments-with-third-person-verbs"><span class="toc-number">2.2.8.</span> <span class="toc-text">PREFER starting function or method comments with third-person verbs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-starting-variable-getter-or-setter-comments-with-noun-phrases"><span class="toc-number">2.2.9.</span> <span class="toc-text">PREFER starting variable, getter, or setter comments with noun phrases.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-starting-library-or-type-comments-with-noun-phrases"><span class="toc-number">2.2.10.</span> <span class="toc-text">PREFER starting library or type comments with noun phrases.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-including-code-samples-in-doc-comments"><span class="toc-number">2.2.11.</span> <span class="toc-text">CONSIDER including code samples in doc comments.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-square-brackets-in-doc-comments-to-refer-to-in-scope-identifiers"><span class="toc-number">2.2.12.</span> <span class="toc-text">DO use square brackets in doc comments to refer to in-scope identifiers.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-prose-to-explain-parameters-return-values-and-exceptions"><span class="toc-number">2.2.13.</span> <span class="toc-text">DO use prose to explain parameters, return values, and exceptions.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-put-doc-comments-before-metadata-annotations"><span class="toc-number">2.2.14.</span> <span class="toc-text">DO put doc comments before metadata annotations.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Markdown"><span class="toc-number">2.3.</span> <span class="toc-text">Markdown</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-markdown-excessively"><span class="toc-number">2.3.1.</span> <span class="toc-text">AVOID using markdown excessively.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-HTML-for-formatting"><span class="toc-number">2.3.2.</span> <span class="toc-text">AVOID using HTML for formatting.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-backtick-fences-for-code-blocks"><span class="toc-number">2.3.3.</span> <span class="toc-text">PREFER backtick fences for code blocks.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Writing"><span class="toc-number">2.4.</span> <span class="toc-text">Writing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-brevity"><span class="toc-number">2.4.1.</span> <span class="toc-text">PREFER brevity.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-abbreviations-and-acronyms-unless-they-are-obvious"><span class="toc-number">2.4.2.</span> <span class="toc-text">AVOID abbreviations and acronyms unless they are obvious.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-%E2%80%9Cthis%E2%80%9D-instead-of-%E2%80%9Cthe%E2%80%9D-to-refer-to-a-member%E2%80%99s-instance"><span class="toc-number">2.4.3.</span> <span class="toc-text">PREFER using “this” instead of “the” to refer to a member’s instance.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage-Guide"><span class="toc-number">3.</span> <span class="toc-text">Usage Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Libraries"><span class="toc-number">3.1.</span> <span class="toc-text">Libraries</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-strings-in-part-of-directives"><span class="toc-number">3.1.1.</span> <span class="toc-text">DO use strings in part of directives.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-import-libraries-that-are-inside-the-src-directory-of-another-package"><span class="toc-number">3.1.2.</span> <span class="toc-text">DON’T import libraries that are inside the src directory of another package.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-allow-an-import-path-to-reach-into-or-out-of-lib"><span class="toc-number">3.1.3.</span> <span class="toc-text">DON’T allow an import path to reach into or out of lib.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-relative-import-paths"><span class="toc-number">3.1.4.</span> <span class="toc-text">PREFER relative import paths.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Null"><span class="toc-number">3.2.</span> <span class="toc-text">Null</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-explicitly-initialize-variables-to-null"><span class="toc-number">3.2.1.</span> <span class="toc-text">DON’T explicitly initialize variables to null.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-an-explicit-default-value-of-null"><span class="toc-number">3.2.2.</span> <span class="toc-text">DON’T use an explicit default value of null.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-to-convert-null-to-a-boolean-value"><span class="toc-number">3.2.3.</span> <span class="toc-text">PREFER using ?? to convert null to a boolean value.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-late-variables-if-you-need-to-check-whether-they-are-initialized"><span class="toc-number">3.2.4.</span> <span class="toc-text">AVOID late variables if you need to check whether they are initialized.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-copying-a-nullable-field-to-a-local-variable-to-enable-type-promotion"><span class="toc-number">3.2.5.</span> <span class="toc-text">CONSIDER copying a nullable field to a local variable to enable type promotion.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Strings"><span class="toc-number">3.3.</span> <span class="toc-text">Strings</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-adjacent-strings-to-concatenate-string-literals"><span class="toc-number">3.3.1.</span> <span class="toc-text">DO use adjacent strings to concatenate string literals.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-interpolation-to-compose-strings-and-values"><span class="toc-number">3.3.2.</span> <span class="toc-text">PREFER using interpolation to compose strings and values.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Collections"><span class="toc-number">3.4.</span> <span class="toc-text">Collections</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-collection-literals-when-possible"><span class="toc-number">3.4.1.</span> <span class="toc-text">DO use collection literals when possible.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-length-to-see-if-a-collection-is-empty"><span class="toc-number">3.4.2.</span> <span class="toc-text">DON’T use .length to see if a collection is empty.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-Iterable-forEach-with-a-function-literal"><span class="toc-number">3.4.3.</span> <span class="toc-text">AVOID using Iterable.forEach() with a function literal.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-List-from-unless-you-intend-to-change-the-type-of-the-result"><span class="toc-number">3.4.4.</span> <span class="toc-text">DON’T use List.from() unless you intend to change the type of the result.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-whereType-to-filter-a-collection-by-type"><span class="toc-number">3.4.5.</span> <span class="toc-text">DO use whereType() to filter a collection by type.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-cast-when-a-nearby-operation-will-do"><span class="toc-number">3.4.6.</span> <span class="toc-text">DON’T use cast() when a nearby operation will do.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-cast"><span class="toc-number">3.4.7.</span> <span class="toc-text">AVOID using cast().</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Functions"><span class="toc-number">3.5.</span> <span class="toc-text">Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-a-function-declaration-to-bind-a-function-to-a-name"><span class="toc-number">3.5.1.</span> <span class="toc-text">DO use a function declaration to bind a function to a name.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-create-a-lambda-when-a-tear-off-will-do"><span class="toc-number">3.5.2.</span> <span class="toc-text">DON’T create a lambda when a tear-off will do.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-to-separate-a-named-parameter-from-its-default-value"><span class="toc-number">3.5.3.</span> <span class="toc-text">DO use &#x3D; to separate a named parameter from its default value.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Variables"><span class="toc-number">3.6.</span> <span class="toc-text">Variables</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-follow-a-consistent-rule-for-var-and-final-on-local-variables"><span class="toc-number">3.6.1.</span> <span class="toc-text">DO follow a consistent rule for var and final on local variables.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-storing-what-you-can-calculate"><span class="toc-number">3.6.2.</span> <span class="toc-text">AVOID storing what you can calculate.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Members"><span class="toc-number">3.7.</span> <span class="toc-text">Members</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-wrap-a-field-in-a-getter-and-setter-unnecessarily"><span class="toc-number">3.7.1.</span> <span class="toc-text">DON’T wrap a field in a getter and setter unnecessarily.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-a-final-field-to-make-a-read-only-property"><span class="toc-number">3.7.2.</span> <span class="toc-text">PREFER using a final field to make a read-only property.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-using-gt-for-simple-members"><span class="toc-number">3.7.3.</span> <span class="toc-text">CONSIDER using &#x3D;&gt; for simple members.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-this-except-to-redirect-to-a-named-constructor-or-to-avoid-shadowing"><span class="toc-number">3.7.4.</span> <span class="toc-text">DON’T use this. except to redirect to a named constructor or to avoid shadowing.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-initialize-fields-at-their-declaration-when-possible"><span class="toc-number">3.7.5.</span> <span class="toc-text">DO initialize fields at their declaration when possible.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Constructors"><span class="toc-number">3.8.</span> <span class="toc-text">Constructors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-initializing-formals-when-possible"><span class="toc-number">3.8.1.</span> <span class="toc-text">DO use initializing formals when possible.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-late-when-a-constructor-initializer-list-will-do"><span class="toc-number">3.8.2.</span> <span class="toc-text">DON’T use late when a constructor initializer list will do.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-instead-of-for-empty-constructor-bodies"><span class="toc-number">3.8.3.</span> <span class="toc-text">DO use ; instead of {} for empty constructor bodies.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-new"><span class="toc-number">3.8.4.</span> <span class="toc-text">DON’T use new.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-const-redundantly"><span class="toc-number">3.8.5.</span> <span class="toc-text">DON’T use const redundantly.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error-handling"><span class="toc-number">3.9.</span> <span class="toc-text">Error handling</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-catches-without-on-clauses"><span class="toc-number">3.9.1.</span> <span class="toc-text">AVOID catches without on clauses.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-discard-errors-from-catches-without-on-clauses"><span class="toc-number">3.9.2.</span> <span class="toc-text">DON’T discard errors from catches without on clauses.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-throw-objects-that-implement-Error-only-for-programmatic-errors"><span class="toc-number">3.9.3.</span> <span class="toc-text">DO throw objects that implement Error only for programmatic errors.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-explicitly-catch-Error-or-types-that-implement-it"><span class="toc-number">3.9.4.</span> <span class="toc-text">DON’T explicitly catch Error or types that implement it.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-rethrow-to-rethrow-a-caught-exception"><span class="toc-number">3.9.5.</span> <span class="toc-text">DO use rethrow to rethrow a caught exception.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Asynchrony"><span class="toc-number">3.10.</span> <span class="toc-text">Asynchrony</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-async-await-over-using-raw-futures"><span class="toc-number">3.10.1.</span> <span class="toc-text">PREFER async&#x2F;await over using raw futures.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-async-when-it-has-no-useful-effect"><span class="toc-number">3.10.2.</span> <span class="toc-text">DON’T use async when it has no useful effect.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-using-higher-order-methods-to-transform-a-stream"><span class="toc-number">3.10.3.</span> <span class="toc-text">CONSIDER using higher-order methods to transform a stream.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-Completer-directly"><span class="toc-number">3.10.4.</span> <span class="toc-text">AVOID using Completer directly.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-test-for-Future-lt-T-gt-when-disambiguating-a-FutureOr-lt-T-gt-whose-type-argument-could-be-Object"><span class="toc-number">3.10.5.</span> <span class="toc-text">DO test for Future&lt;T&gt; when disambiguating a FutureOr&lt;T&gt; whose type argument could be Object.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Design-Guide"><span class="toc-number">4.</span> <span class="toc-text">Design Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Names"><span class="toc-number">4.1.</span> <span class="toc-text">Names</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-terms-consistently"><span class="toc-number">4.1.1.</span> <span class="toc-text">DO use terms consistently.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-abbreviations"><span class="toc-number">4.1.2.</span> <span class="toc-text">AVOID abbreviations.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-putting-the-most-descriptive-noun-last"><span class="toc-number">4.1.3.</span> <span class="toc-text">PREFER putting the most descriptive noun last.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-making-the-code-read-like-a-sentence"><span class="toc-number">4.1.4.</span> <span class="toc-text">CONSIDER making the code read like a sentence.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-a-noun-phrase-for-a-non-boolean-property-or-variable"><span class="toc-number">4.1.5.</span> <span class="toc-text">PREFER a noun phrase for a non-boolean property or variable.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-a-non-imperative-verb-phrase-for-a-boolean-property-or-variable"><span class="toc-number">4.1.6.</span> <span class="toc-text">PREFER a non-imperative verb phrase for a boolean property or variable.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-omitting-the-verb-for-a-named-boolean-parameter"><span class="toc-number">4.1.7.</span> <span class="toc-text">CONSIDER omitting the verb for a named boolean parameter.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-the-%E2%80%9Cpositive%E2%80%9D-name-for-a-boolean-property-or-variable"><span class="toc-number">4.1.8.</span> <span class="toc-text">PREFER the “positive” name for a boolean property or variable.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-an-imperative-verb-phrase-for-a-function-or-method-whose-main-purpose-is-a-side-effect"><span class="toc-number">4.1.9.</span> <span class="toc-text">PREFER an imperative verb phrase for a function or method whose main purpose is a side effect.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose"><span class="toc-number">4.1.10.</span> <span class="toc-text">PREFER a noun phrase or non-imperative verb phrase for a function or method if returning a value is its primary purpose.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs"><span class="toc-number">4.1.11.</span> <span class="toc-text">CONSIDER an imperative verb phrase for a function or method if you want to draw attention to the work it performs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-starting-a-method-name-with-get"><span class="toc-number">4.1.12.</span> <span class="toc-text">AVOID starting a method name with get.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-naming-a-method-toXxx-if-it-copies-the-object%E2%80%99s-state-to-a-new-object"><span class="toc-number">4.1.13.</span> <span class="toc-text">PREFER naming a method toXxx() if it copies the object’s state to a new object.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-naming-a-method-asXxx-if-it-returns-a-different-representation-backed-by-the-original-object"><span class="toc-number">4.1.14.</span> <span class="toc-text">PREFER naming a method asXxx() if it returns a different representation backed by the original object.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-describing-the-parameters-in-the-function%E2%80%99s-or-method%E2%80%99s-name"><span class="toc-number">4.1.15.</span> <span class="toc-text">AVOID describing the parameters in the function’s or method’s name.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-follow-existing-mnemonic-conventions-when-naming-type-parameters"><span class="toc-number">4.1.16.</span> <span class="toc-text">DO follow existing mnemonic conventions when naming type parameters.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Libraries-1"><span class="toc-number">4.2.</span> <span class="toc-text">Libraries</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-making-declarations-private"><span class="toc-number">4.2.1.</span> <span class="toc-text">PREFER making declarations private.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-declaring-multiple-classes-in-the-same-library"><span class="toc-number">4.2.2.</span> <span class="toc-text">CONSIDER declaring multiple classes in the same library.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Classes-and-mixins"><span class="toc-number">4.3.</span> <span class="toc-text">Classes and mixins</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-defining-a-one-member-abstract-class-when-a-simple-function-will-do"><span class="toc-number">4.3.1.</span> <span class="toc-text">AVOID defining a one-member abstract class when a simple function will do.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-defining-a-class-that-contains-only-static-members"><span class="toc-number">4.3.2.</span> <span class="toc-text">AVOID defining a class that contains only static members.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-extending-a-class-that-isn%E2%80%99t-intended-to-be-subclassed"><span class="toc-number">4.3.3.</span> <span class="toc-text">AVOID extending a class that isn’t intended to be subclassed.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-document-if-your-class-supports-being-extended"><span class="toc-number">4.3.4.</span> <span class="toc-text">DO document if your class supports being extended.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-implementing-a-class-that-isn%E2%80%99t-intended-to-be-an-interface"><span class="toc-number">4.3.5.</span> <span class="toc-text">AVOID implementing a class that isn’t intended to be an interface.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-document-if-your-class-supports-being-used-as-an-interface"><span class="toc-number">4.3.6.</span> <span class="toc-text">DO document if your class supports being used as an interface.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-mixin-to-define-a-mixin-type"><span class="toc-number">4.3.7.</span> <span class="toc-text">DO use mixin to define a mixin type.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-mixing-in-a-type-that-isn%E2%80%99t-intended-to-be-a-mixin"><span class="toc-number">4.3.8.</span> <span class="toc-text">AVOID mixing in a type that isn’t intended to be a mixin.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Constructors-1"><span class="toc-number">4.4.</span> <span class="toc-text">Constructors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-making-your-constructor-const-if-the-class-supports-it"><span class="toc-number">4.4.1.</span> <span class="toc-text">CONSIDER making your constructor const if the class supports it.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Members-1"><span class="toc-number">4.5.</span> <span class="toc-text">Members</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-making-fields-and-top-level-variables-final"><span class="toc-number">4.5.1.</span> <span class="toc-text">PREFER making fields and top-level variables final.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-getters-for-operations-that-conceptually-access-properties"><span class="toc-number">4.5.2.</span> <span class="toc-text">DO use getters for operations that conceptually access properties.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-setters-for-operations-that-conceptually-change-properties"><span class="toc-number">4.5.3.</span> <span class="toc-text">DO use setters for operations that conceptually change properties.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-define-a-setter-without-a-corresponding-getter"><span class="toc-number">4.5.4.</span> <span class="toc-text">DON’T define a setter without a corresponding getter.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-runtime-type-tests-to-fake-overloading"><span class="toc-number">4.5.5.</span> <span class="toc-text">AVOID using runtime type tests to fake overloading.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-public-late-final-fields-without-initializers"><span class="toc-number">4.5.6.</span> <span class="toc-text">AVOID public late final fields without initializers.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-returning-nullable-Future-Stream-and-collection-types"><span class="toc-number">4.5.7.</span> <span class="toc-text">AVOID returning nullable Future, Stream, and collection types.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-returning-this-from-methods-just-to-enable-a-fluent-interface"><span class="toc-number">4.5.8.</span> <span class="toc-text">AVOID returning this from methods just to enable a fluent interface.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Types"><span class="toc-number">4.6.</span> <span class="toc-text">Types</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Type-inference"><span class="toc-number">4.6.1.</span> <span class="toc-text">Type inference</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-type-annotate-variables-without-initializers"><span class="toc-number">4.6.2.</span> <span class="toc-text">DO type annotate variables without initializers.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-type-annotate-fields-and-top-level-variables-if-the-type-isn%E2%80%99t-obvious"><span class="toc-number">4.6.3.</span> <span class="toc-text">DO type annotate fields and top-level variables if the type isn’t obvious.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-redundantly-type-annotate-initialized-local-variables"><span class="toc-number">4.6.4.</span> <span class="toc-text">DON’T redundantly type annotate initialized local variables.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-annotate-return-types-on-function-declarations"><span class="toc-number">4.6.5.</span> <span class="toc-text">DO annotate return types on function declarations.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-annotate-parameter-types-on-function-declarations"><span class="toc-number">4.6.6.</span> <span class="toc-text">DO annotate parameter types on function declarations.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-annotate-inferred-parameter-types-on-function-expressions"><span class="toc-number">4.6.7.</span> <span class="toc-text">DON’T annotate inferred parameter types on function expressions.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-type-annotate-initializing-formals"><span class="toc-number">4.6.8.</span> <span class="toc-text">DON’T type annotate initializing formals.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-write-type-arguments-on-generic-invocations-that-aren%E2%80%99t-inferred"><span class="toc-number">4.6.9.</span> <span class="toc-text">DO write type arguments on generic invocations that aren’t inferred.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-write-type-arguments-on-generic-invocations-that-are-inferred"><span class="toc-number">4.6.10.</span> <span class="toc-text">DON’T write type arguments on generic invocations that are inferred.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-writing-incomplete-generic-types"><span class="toc-number">4.6.11.</span> <span class="toc-text">AVOID writing incomplete generic types.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-annotate-with-dynamic-instead-of-letting-inference-fail"><span class="toc-number">4.6.12.</span> <span class="toc-text">DO annotate with dynamic instead of letting inference fail.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-signatures-in-function-type-annotations"><span class="toc-number">4.6.13.</span> <span class="toc-text">PREFER signatures in function type annotations.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-specify-a-return-type-for-a-setter"><span class="toc-number">4.6.14.</span> <span class="toc-text">DON’T specify a return type for a setter.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-the-legacy-typedef-syntax"><span class="toc-number">4.6.15.</span> <span class="toc-text">DON’T use the legacy typedef syntax.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-inline-function-types-over-typedefs"><span class="toc-number">4.6.16.</span> <span class="toc-text">PREFER inline function types over typedefs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-function-type-syntax-for-parameters"><span class="toc-number">4.6.17.</span> <span class="toc-text">PREFER using function type syntax for parameters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-dynamic-unless-you-want-to-disable-static-checking"><span class="toc-number">4.6.18.</span> <span class="toc-text">AVOID using dynamic unless you want to disable static checking.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-Future-lt-void-gt-as-the-return-type-of-asynchronous-members-that-do-not-produce-values"><span class="toc-number">4.6.19.</span> <span class="toc-text">DO use Future&lt;void&gt; as the return type of asynchronous members that do not produce values.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-FutureOr-lt-T-gt-as-a-return-type"><span class="toc-number">4.6.20.</span> <span class="toc-text">AVOID using FutureOr&lt;T&gt; as a return type.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parameters"><span class="toc-number">4.7.</span> <span class="toc-text">Parameters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-positional-boolean-parameters"><span class="toc-number">4.7.1.</span> <span class="toc-text">AVOID positional boolean parameters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-optional-positional-parameters-if-the-user-may-want-to-omit-earlier-parameters"><span class="toc-number">4.7.2.</span> <span class="toc-text">AVOID optional positional parameters if the user may want to omit earlier parameters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-mandatory-parameters-that-accept-a-special-%E2%80%9Cno-argument%E2%80%9D-value"><span class="toc-number">4.7.3.</span> <span class="toc-text">AVOID mandatory parameters that accept a special “no argument” value.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-inclusive-start-and-exclusive-end-parameters-to-accept-a-range"><span class="toc-number">4.7.4.</span> <span class="toc-text">DO use inclusive start and exclusive end parameters to accept a range.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Equality"><span class="toc-number">4.8.</span> <span class="toc-text">Equality</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-override-hashCode-if-you-override"><span class="toc-number">4.8.1.</span> <span class="toc-text">DO override hashCode if you override &#x3D;&#x3D;.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-make-your-operator-obey-the-mathematical-rules-of-equality"><span class="toc-number">4.8.2.</span> <span class="toc-text">DO make your &#x3D;&#x3D; operator obey the mathematical rules of equality.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-defining-custom-equality-for-mutable-classes"><span class="toc-number">4.8.3.</span> <span class="toc-text">AVOID defining custom equality for mutable classes.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-make-the-parameter-to-nullable"><span class="toc-number">4.8.4.</span> <span class="toc-text">DON’T make the parameter to &#x3D;&#x3D; nullable.</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Effective Dart 学习笔记
    </h1>



    <div class="meta">
      <p/>
      <!-- <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">aJIEw</span>
      </span> -->
      
    <div class="postdate">
      
        <time datetime="2021-04-10T12:30:00.000Z" itemprop="datePublished">2021-04-10</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Dart/" rel="tag">Dart</a>, <a class="tag-link-link" href="/tags/Notes/" rel="tag">Notes</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><img src="/assets/2021-05-15/cover.png" alt="cover"></p>
<blockquote>
<p>阅读 <a target="_blank" rel="noopener" href="https://dart.dev/guides/language/effective-dart">Effective Dart</a> 时做的一些笔记。</p>
</blockquote>
<h2 id="Style-Guide"><a href="#Style-Guide" class="headerlink" title="Style Guide"></a>Style Guide</h2><p>好代码一定是遵循良好代码风格的代码。前后一致的命名、排序和格式化使得代码具有更高的可读性。在整个 Dart 生态中维持一个规范统一的代码风格，可以使得程序员之间分享彼此的代码时，更容易阅读和互相学习。</p>
<h3 id="Identifiers"><a href="#Identifiers" class="headerlink" title="Identifiers"></a>Identifiers</h3><p>Dart 中标识符有三种类型：</p>
<ul>
<li>UpperCamelCase：大驼峰命名法，每个单词首字母大写。</li>
<li>lowerCamelCase：小驼峰命名法，除了首个单词，其余每个单词首字母大写。</li>
<li>lowercase_with_underscores：带下划线的小写命名法，每个单词小写，用下划线分割单词。</li>
</ul>
<span id="more"></span>

<h4 id="DO-name-types-using-UpperCamelCase"><a href="#DO-name-types-using-UpperCamelCase" class="headerlink" title="DO name types using UpperCamelCase."></a>DO name types using <code>UpperCamelCase</code>.</h4><p>类名，枚举类，<code>typedef</code>，注解等的命名都应该采用大驼峰命名法。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SliderMenu</span> </span>&#123; ... &#125;<br><br><span class="hljs-keyword">enum</span> Status &#123; ... &#125;<br><br><span class="hljs-keyword">typedef</span> Predicate&lt;T&gt; = <span class="hljs-built_in">bool</span> <span class="hljs-built_in">Function</span>(T value);<br><br><span class="hljs-meta">@Foo</span>(anArg)<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123; ... &#125;<br><br>#### DO name extensions using `UpperCamelCase`.<br><br>和类型命名一样，扩展方法也应该使用大驼峰命名法。<br><br>​```dart<br><span class="hljs-keyword">extension</span> MyFancyList&lt;T&gt; <span class="hljs-keyword">on</span> <span class="hljs-built_in">List</span>&lt;T&gt; &#123; ... &#125;<br></code></pre></td></tr></table></figure>

<h4 id="DO-name-libraries-packages-directories-and-source-files-using-lowercase-with-underscores"><a href="#DO-name-libraries-packages-directories-and-source-files-using-lowercase-with-underscores" class="headerlink" title="DO name libraries, packages, directories, and source files using lowercase_with_underscores."></a>DO name libraries, packages, directories, and source files using <code>lowercase_with_underscores</code>.</h4><p>库名，包名，文件和文件夹名，都应该使用小写+下划分隔符命名。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">library</span> my_library;<br><br><span class="hljs-keyword">export</span> <span class="hljs-string">&#x27;global_constants.dart&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-string">&#x27;src/common_util/screen_util.dart&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="DO-name-import-prefixes-using-lowercase-with-underscores"><a href="#DO-name-import-prefixes-using-lowercase-with-underscores" class="headerlink" title="DO name import prefixes using lowercase_with_underscores."></a>DO name import prefixes using <code>lowercase_with_underscores</code>.</h4><p>导入包名使用别名时，用小写+下划分隔符。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:angular_components/angular_components&#x27;</span> <span class="hljs-keyword">as</span> angular_components;<br></code></pre></td></tr></table></figure>

<h4 id="DO-name-other-identifiers-using-lowerCamelCase"><a href="#DO-name-other-identifiers-using-lowerCamelCase" class="headerlink" title="DO name other identifiers using lowerCamelCase."></a>DO name other identifiers using <code>lowerCamelCase</code>.</h4><p>顶层方法，变量，类的成员，变量，参数等，都应该使用小驼峰命名法。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> httpRequest;<br><br><span class="hljs-keyword">void</span> alignItems(<span class="hljs-built_in">bool</span> clearItems) &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-using-lowerCamelCase-for-constant-names"><a href="#PREFER-using-lowerCamelCase-for-constant-names" class="headerlink" title="PREFER using lowerCamelCase for constant names."></a>PREFER using <code>lowerCamelCase</code> for constant names.</h4><p>推荐使用小驼峰命名常量、枚举类。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">const</span> defaultTimeout = <span class="hljs-number">1000</span>;<br><span class="hljs-keyword">final</span> urlScheme = <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">&#x27;^([a-z]+):&#x27;</span>);<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dice</span> </span>&#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> numberGenerator = Random();<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DO-capitalize-acronyms-and-abbreviations-longer-than-two-letters-like-words"><a href="#DO-capitalize-acronyms-and-abbreviations-longer-than-two-letters-like-words" class="headerlink" title="DO capitalize acronyms and abbreviations longer than two letters like words."></a>DO capitalize acronyms and abbreviations longer than two letters like words.</h4><p>大于两个字符的缩写均当做普通单词使用。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpConnection</span> </span>&#123;&#125; <span class="hljs-comment">// bad: HTTPConnection</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DBIOPort</span> </span>&#123;&#125; <span class="hljs-comment">// bad: DbIoPort</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TVVcr</span> </span>&#123;&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MrRogers</span> </span>&#123;&#125;<br><br><span class="hljs-keyword">var</span> httpRequest = ...<br><span class="hljs-keyword">var</span> uiHandler = ...<br>Id id;<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-using-etc-for-unused-callback-parameters"><a href="#PREFER-using-etc-for-unused-callback-parameters" class="headerlink" title="PREFER using _, __, etc. for unused callback parameters."></a>PREFER using <code>_</code>, <code>__</code>, etc. for unused callback parameters.</h4><p>推荐使用 <code>_</code> 命名未使用的回调参数。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart">futureOfVoid.then((_, __, ___) &#123;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Operation complete.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-use-a-leading-underscore-for-identifiers-that-aren’t-private"><a href="#DON’T-use-a-leading-underscore-for-identifiers-that-aren’t-private" class="headerlink" title="DON’T use a leading underscore for identifiers that aren’t private."></a>DON’T use a leading underscore for identifiers that aren’t private.</h4><p>不要使用下划线作为标识符的起始字符，只有私有变量和私有函数才可以使用下划线开头。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> _notVisible;<br><br>_initContentForCaseA() &#123;<br>  ...<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-use-prefix-letters"><a href="#DON’T-use-prefix-letters" class="headerlink" title="DON’T use prefix letters."></a>DON’T use prefix letters.</h4><p>不要使用前缀字符。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> defaultTimeout; <span class="hljs-comment">// bad: kDefaultTimeout</span><br></code></pre></td></tr></table></figure>

<h3 id="Ordering"><a href="#Ordering" class="headerlink" title="Ordering"></a>Ordering</h3><p>为了保持一个 Dart 文件的整洁性，我们应该保证每段代码都按照特定的顺序排列，并且每个区域都被空白行分割。</p>
<h4 id="DO-place-“dart-”-imports-before-other-imports"><a href="#DO-place-“dart-”-imports-before-other-imports" class="headerlink" title="DO place “dart:” imports before other imports."></a>DO place “dart:” imports before other imports.</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;dart:async&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;dart:html&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:bar/bar.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:foo/foo.dart&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="DO-place-“package-”-imports-before-relative-imports"><a href="#DO-place-“package-”-imports-before-relative-imports" class="headerlink" title="DO place “package:” imports before relative imports."></a>DO place “package:” imports before relative imports.</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:bar/bar.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:foo/foo.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;util.dart&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="DO-specify-exports-in-a-separate-section-after-all-imports"><a href="#DO-specify-exports-in-a-separate-section-after-all-imports" class="headerlink" title="DO specify exports in a separate section after all imports."></a>DO specify exports in a separate section after all imports.</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;src/error.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;src/foo_bar.dart&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-string">&#x27;src/error.dart&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="DO-sort-sections-alphabetically"><a href="#DO-sort-sections-alphabetically" class="headerlink" title="DO sort sections alphabetically."></a>DO sort sections alphabetically.</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:bar/bar.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:foo/foo.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:gold/gold.dart&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h3 id="Formatting"><a href="#Formatting" class="headerlink" title="Formatting"></a>Formatting</h3><p>为了使得代码具有良好的可读性，我们需要格式化 Dart 代码。</p>
<h4 id="DO-format-your-code-using-dart-format"><a href="#DO-format-your-code-using-dart-format" class="headerlink" title="DO format your code using dart format."></a>DO format your code using <code>dart format</code>.</h4><p>Dart 为我们提供了 <a target="_blank" rel="noopener" href="https://dart.dev/tools/dart-format">dart format</a> 工具格式化代码，具体见相关<a target="_blank" rel="noopener" href="https://github.com/dart-lang/dart_style/wiki/Formatting-Rules">文档</a>。</p>
<h4 id="CONSIDER-changing-your-code-to-make-it-more-formatter-friendly"><a href="#CONSIDER-changing-your-code-to-make-it-more-formatter-friendly" class="headerlink" title="CONSIDER changing your code to make it more formatter-friendly."></a>CONSIDER changing your code to make it more formatter-friendly.</h4><p>在某些场景下，格式化可能会失效，比如很长的标识符、嵌套很深的表达式、多种操作符的混合使用等，我们应该考虑修改代码使得代码更加容易被格式化。</p>
<h4 id="AVOID-lines-longer-than-80-characters"><a href="#AVOID-lines-longer-than-80-characters" class="headerlink" title="AVOID lines longer than 80 characters."></a>AVOID lines longer than 80 characters.</h4><p>单行代码越长越难读，考虑换行，或者将一些特别长的标识符简写。</p>
<h4 id="DO-use-curly-braces-for-all-flow-control-statements"><a href="#DO-use-curly-braces-for-all-flow-control-statements" class="headerlink" title="DO use curly braces for all flow control statements."></a>DO use curly braces for all flow control statements.</h4><p>哪怕只有流程语句中只有一个表达式也应该使用花括号。</p>
<h2 id="Documentation-Guide"><a href="#Documentation-Guide" class="headerlink" title="Documentation Guide"></a>Documentation Guide</h2><p>良好的文档和注释可以使得阅读你的代码的人（包括未来的你）更容易理解你的代码。简洁、精确的注释可以节约一个人大量的时间和精力去理解看懂一段代码所需要的上下文。虽然好的代码是自解释的，但是大多数时候我们都应该写更多的注释而不是更少的注释。</p>
<h3 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h3><h4 id="DO-format-comments-like-sentences"><a href="#DO-format-comments-like-sentences" class="headerlink" title="DO format comments like sentences."></a>DO format comments like sentences.</h4><p>应该像写普通的句子一样写注释，注释尽量使用英文，首字符前加空格，首字母大写，每一句都应该使用标点。如果使用中文，则应该在中英文之间使用空格分割。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// Not if there is nothing before it.</span><br><span class="hljs-keyword">if</span> (_chunks.isEmpty) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br><span class="hljs-comment">// 尽量减少使用中文注释，即使使用也要 use space 分割中英文字符。</span><br><span class="hljs-keyword">if</span> (_chunks.specialCases) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-use-block-comments-for-documentation"><a href="#DON’T-use-block-comments-for-documentation" class="headerlink" title="DON’T use block comments for documentation."></a>DON’T use block comments for documentation.</h4><p>Dart 中不推荐使用块注释。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart">greet(name) &#123;<br>  <span class="hljs-comment">// Assume we have a valid name.</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Hi, <span class="hljs-subst">$name</span>!&#x27;</span>);<br>  <span class="hljs-comment">// bad:</span><br>  <span class="hljs-comment">/* Assume we have a valid name. */</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Hi, <span class="hljs-subst">$name</span>!&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Doc-comments"><a href="#Doc-comments" class="headerlink" title="Doc comments"></a>Doc comments</h3><p>文档注释 <code>///</code> 可以用于方便地生成文档页，主要通过 <a target="_blank" rel="noopener" href="https://github.com/dart-lang/dartdoc">dartdoc</a> 生成。</p>
<h4 id="DO-use-doc-comments-to-document-members-and-types"><a href="#DO-use-doc-comments-to-document-members-and-types" class="headerlink" title="DO use /// doc comments to document members and types."></a>DO use <code>///</code> doc comments to document members and types.</h4><p>对于类和成员变量变量，使用 <code>///</code> 注释，这样 dartdoc 才能找到它们并解析成文档。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">The number of characters in this chunk when unsplit.</span></span><br><span class="hljs-built_in">int</span> <span class="hljs-keyword">get</span> length =&gt; ...<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-writing-doc-comments-for-public-APIs"><a href="#PREFER-writing-doc-comments-for-public-APIs" class="headerlink" title="PREFER writing doc comments for public APIs."></a>PREFER writing doc comments for public APIs.</h4><p>不用给每个类，成员变量写注释，但是至少关键部分应该写文档注释。</p>
<h4 id="CONSIDER-writing-a-library-level-doc-comment"><a href="#CONSIDER-writing-a-library-level-doc-comment" class="headerlink" title="CONSIDER writing a library-level doc comment."></a>CONSIDER writing a library-level doc comment.</h4><p>最好在 Dart library 的入口提供文档注释，比如 library 的主要功能、术语解释、样本代码、常用类和方法的链接、外部引用资源等。</p>
<h4 id="CONSIDER-writing-doc-comments-for-private-APIs"><a href="#CONSIDER-writing-doc-comments-for-private-APIs" class="headerlink" title="CONSIDER writing doc comments for private APIs."></a>CONSIDER writing doc comments for private APIs.</h4><p>一些重要的私有方法也应该提供文档注释，方便库的使用者理解你的代码。</p>
<h4 id="DO-start-doc-comments-with-a-single-sentence-summary"><a href="#DO-start-doc-comments-with-a-single-sentence-summary" class="headerlink" title="DO start doc comments with a single-sentence summary."></a>DO start doc comments with a single-sentence summary.</h4><p>每个文档注释的开头应该使用简单、准确的一句话作为总结概括。</p>
<h4 id="DO-separate-the-first-sentence-of-a-doc-comment-into-its-own-paragraph"><a href="#DO-separate-the-first-sentence-of-a-doc-comment-into-its-own-paragraph" class="headerlink" title="DO separate the first sentence of a doc comment into its own paragraph."></a>DO separate the first sentence of a doc comment into its own paragraph.</h4><p>第一句总结之后使用空白行分割，可以使得文档注释更易读。</p>
<h4 id="AVOID-redundancy-with-the-surrounding-context"><a href="#AVOID-redundancy-with-the-surrounding-context" class="headerlink" title="AVOID redundancy with the surrounding context."></a>AVOID redundancy with the surrounding context.</h4><p>为类的成员和方法写注释时，避免写得太过啰嗦，因为读者对类的基本用途和上下文已经有了解了。</p>
<h4 id="PREFER-starting-function-or-method-comments-with-third-person-verbs"><a href="#PREFER-starting-function-or-method-comments-with-third-person-verbs" class="headerlink" title="PREFER starting function or method comments with third-person verbs."></a>PREFER starting function or method comments with third-person verbs.</h4><p>使用第三人称动词作为方法注释的开头，因为方法一般都是执行一项任务，这样可以让读者更快了解方法的用途。</p>
<h4 id="PREFER-starting-variable-getter-or-setter-comments-with-noun-phrases"><a href="#PREFER-starting-variable-getter-or-setter-comments-with-noun-phrases" class="headerlink" title="PREFER starting variable, getter, or setter comments with noun phrases."></a>PREFER starting variable, getter, or setter comments with noun phrases.</h4><p>使用名词作为变量注释的开头，因为变量一般代表一条数据。</p>
<h4 id="PREFER-starting-library-or-type-comments-with-noun-phrases"><a href="#PREFER-starting-library-or-type-comments-with-noun-phrases" class="headerlink" title="PREFER starting library or type comments with noun phrases."></a>PREFER starting library or type comments with noun phrases.</h4><p>使用名词作为库和类型注释的开头，同样库和类型是一种对象火种功能的抽象。</p>
<h4 id="CONSIDER-including-code-samples-in-doc-comments"><a href="#CONSIDER-including-code-samples-in-doc-comments" class="headerlink" title="CONSIDER including code samples in doc comments."></a>CONSIDER including code samples in doc comments.</h4><p>复杂的代码中如果包含示例代码有助于读者理解你的代码。</p>
<h4 id="DO-use-square-brackets-in-doc-comments-to-refer-to-in-scope-identifiers"><a href="#DO-use-square-brackets-in-doc-comments-to-refer-to-in-scope-identifiers" class="headerlink" title="DO use square brackets in doc comments to refer to in-scope identifiers."></a>DO use square brackets in doc comments to refer to in-scope identifiers.</h4><p>文档注释中使用中括号引用当前上下文中代码的链接。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">Throws a [StateError] if ...</span></span><br><span class="hljs-comment">/// <span class="language-markdown">similar to [anotherMethod()], but ...</span></span><br><span class="hljs-comment">/// <span class="language-markdown">Similar to [Duration.inDays], but handles fractional days.</span></span><br><span class="hljs-comment">/// <span class="language-markdown">To create a point from polar coordinates, use [Point.polar()].</span></span><br></code></pre></td></tr></table></figure>

<h4 id="DO-use-prose-to-explain-parameters-return-values-and-exceptions"><a href="#DO-use-prose-to-explain-parameters-return-values-and-exceptions" class="headerlink" title="DO use prose to explain parameters, return values, and exceptions."></a>DO use prose to explain parameters, return values, and exceptions.</h4><p>Java 中一般使用 <code>@param</code>, <code>@returns</code>, <code>@throws</code> 等注解来注释参数和返回值等，在 Dart 中不要这么做，推荐使用直白文字的叙述方法的功能，参数以及特殊的地方。</p>
<h4 id="DO-put-doc-comments-before-metadata-annotations"><a href="#DO-put-doc-comments-before-metadata-annotations" class="headerlink" title="DO put doc comments before metadata annotations."></a>DO put doc comments before metadata annotations.</h4><p>文档注释应该在注解之前。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">A button that can be flipped on and off.</span></span><br><span class="hljs-meta">@Component</span>(selector: <span class="hljs-string">&#x27;toggle&#x27;</span>)<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToggleComponent</span> </span>&#123;&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h3><p>Dart 中支持大多数常见的 <a target="_blank" rel="noopener" href="https://daringfireball.net/projects/markdown/">markdown</a> 语法。</p>
<h4 id="AVOID-using-markdown-excessively"><a href="#AVOID-using-markdown-excessively" class="headerlink" title="AVOID using markdown excessively."></a>AVOID using markdown excessively.</h4><p>When in doubt, format less. Formatting exists to illuminate your content, not replace it. Words are what matter. (说得太经典了，拿小本本记下来(๑•͈ᴗ•͈))</p>
<h4 id="AVOID-using-HTML-for-formatting"><a href="#AVOID-using-HTML-for-formatting" class="headerlink" title="AVOID using HTML for formatting."></a>AVOID using HTML for formatting.</h4><p>大多数情况下，应该只使用 markdown 语法就够了。</p>
<h4 id="PREFER-backtick-fences-for-code-blocks"><a href="#PREFER-backtick-fences-for-code-blocks" class="headerlink" title="PREFER backtick fences for code blocks."></a>PREFER backtick fences for code blocks.</h4><p>我们可以使用 <code>inline code</code> 或者 code blocks，如果是小段的代码可以使用前者，如果是大段的代码块，推荐使用后者。</p>
<h3 id="Writing"><a href="#Writing" class="headerlink" title="Writing"></a>Writing</h3><p>作为程序员，虽然我们每天主要和计算机打交道，但是我们写得绝大多数代码都是给人读的，写代码需要练习，写作也同样需要练习。</p>
<p>这里介绍一些写作技巧，更多关于技术写作的技巧，推荐阅读：<a target="_blank" rel="noopener" href="https://en.wikiversity.org/wiki/Technical_writing_style">Technical writing style</a>.</p>
<h4 id="PREFER-brevity"><a href="#PREFER-brevity" class="headerlink" title="PREFER brevity."></a>PREFER brevity.</h4><p>保证你的文字是清晰和精准的，同时保持简洁。</p>
<h4 id="AVOID-abbreviations-and-acronyms-unless-they-are-obvious"><a href="#AVOID-abbreviations-and-acronyms-unless-they-are-obvious" class="headerlink" title="AVOID abbreviations and acronyms unless they are obvious."></a>AVOID abbreviations and acronyms unless they are obvious.</h4><p>尽可能少使用缩写，除非是那种人人都知道的，比如 “i.e.”, “e.g.”, “etc”。</p>
<h4 id="PREFER-using-“this”-instead-of-“the”-to-refer-to-a-member’s-instance"><a href="#PREFER-using-“this”-instead-of-“the”-to-refer-to-a-member’s-instance" class="headerlink" title="PREFER using “this” instead of “the” to refer to a member’s instance."></a>PREFER using “this” instead of “the” to refer to a member’s instance.</h4><p>当需要代指当前类的实例是时候，使用 this 代替 the。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span> </span>&#123;<br>  <span class="hljs-comment">/// <span class="language-markdown">True if this box contains a value.</span></span><br>  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> hasValue =&gt; _value != <span class="hljs-keyword">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Usage-Guide"><a href="#Usage-Guide" class="headerlink" title="Usage Guide"></a>Usage Guide</h2><h3 id="Libraries"><a href="#Libraries" class="headerlink" title="Libraries"></a>Libraries</h3><h4 id="DO-use-strings-in-part-of-directives"><a href="#DO-use-strings-in-part-of-directives" class="headerlink" title="DO use strings in part of directives."></a>DO use strings in <code>part of</code> directives.</h4><p>在 Dart 中，我们可以使用 <code>part of</code> 将代码分离到另一个文件中，然后使用 <code>part</code> 引用这部分分离出去的代码，推荐的做法是，直接使用 URI 链接到指定的文件，而不是只指定库的名字。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">part</span> of <span class="hljs-string">&#x27;../../my_library.dart&#x27;</span>;<br><br><span class="hljs-comment">// bad:</span><br><span class="hljs-keyword">part</span> of my_library;<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-import-libraries-that-are-inside-the-src-directory-of-another-package"><a href="#DON’T-import-libraries-that-are-inside-the-src-directory-of-another-package" class="headerlink" title="DON’T import libraries that are inside the src directory of another package."></a>DON’T import libraries that are inside the <code>src</code> directory of another package.</h4><p>我们应该直接导入库，而不是导入库中的某个文件或者目录，因为库作者可能对目录结构做修改。</p>
<h4 id="DON’T-allow-an-import-path-to-reach-into-or-out-of-lib"><a href="#DON’T-allow-an-import-path-to-reach-into-or-out-of-lib" class="headerlink" title="DON’T allow an import path to reach into or out of lib."></a>DON’T allow an import path to reach into or out of <code>lib</code>.</h4><p>比如使用相对路径引用 lib 之外的某个文件，或者 lib 之外的某个文件（比如 test 文件夹）导入 lib 内的文件，这两种情况都应该避免，应该只使用包导入的方式导入依赖。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:my_package/api.dart&#x27;</span>;<br><br><span class="hljs-comment">// bad:</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../lib/api.dart&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-relative-import-paths"><a href="#PREFER-relative-import-paths" class="headerlink" title="PREFER relative import paths."></a>PREFER relative import paths.</h4><p>如果无法使用包导入，才使用相对路径的方式导入。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart">test/api_test.dart:<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;test_utils.dart&#x27;</span>; <span class="hljs-comment">// 在当前同一个目录结构下，可以使用相对路径</span><br></code></pre></td></tr></table></figure>

<h3 id="Null"><a href="#Null" class="headerlink" title="Null"></a>Null</h3><h4 id="DON’T-explicitly-initialize-variables-to-null"><a href="#DON’T-explicitly-initialize-variables-to-null" class="headerlink" title="DON’T explicitly initialize variables to null."></a>DON’T explicitly initialize variables to <code>null</code>.</h4><p>Dart 会自动为可为空的变量赋值为 null，而不可为空的变量在初始化之前被使用的话会报错。所以没必要为变量赋空值。</p>
<h4 id="DON’T-use-an-explicit-default-value-of-null"><a href="#DON’T-use-an-explicit-default-value-of-null" class="headerlink" title="DON’T use an explicit default value of null."></a>DON’T use an explicit default value of <code>null</code>.</h4><p>与上一条类似，如果你为一个可选位置参数的值可为空，那么 Dart 会为它自动赋值为空值，没必要手动赋值为空。</p>
<h4 id="PREFER-using-to-convert-null-to-a-boolean-value"><a href="#PREFER-using-to-convert-null-to-a-boolean-value" class="headerlink" title="PREFER using ?? to convert null to a boolean value."></a>PREFER using <code>??</code> to convert <code>null</code> to a boolean value.</h4><p>使用 <code>??</code> 将空值转换为布尔值，好处更简洁易懂。看例子：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// If you want null to be false:</span><br><span class="hljs-keyword">if</span> (optionalThing?.isEnabled ?? <span class="hljs-keyword">false</span>) &#123;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Have enabled thing.&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// If you want null to be true:</span><br><span class="hljs-keyword">if</span> (optionalThing?.isEnabled ?? <span class="hljs-keyword">true</span>) &#123;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Have enabled thing or nothing.&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// 第二种情况等同于下面这种写法，所以使用 ?? 明显可以简化写法</span><br><span class="hljs-keyword">if</span> (optionalThing?.isEnabled == <span class="hljs-keyword">null</span> || optionalThing!.isEnabled!) &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Have enabled thing or nothing.&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-late-variables-if-you-need-to-check-whether-they-are-initialized"><a href="#AVOID-late-variables-if-you-need-to-check-whether-they-are-initialized" class="headerlink" title="AVOID late variables if you need to check whether they are initialized."></a>AVOID <code>late</code> variables if you need to check whether they are initialized.</h4><p>使用 <code>late</code> 关键字可以让我们延迟初始化某些变量，但是这样我们就没法判断某个变量是否初始化了，当需要做这样的判断时候，最好的做法是不要使用 <code>late</code> 关键字，而是使用 nullable 变量。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// 使用 late 关键字</span><br><span class="hljs-keyword">late</span> <span class="hljs-built_in">Type</span> a;<br><span class="hljs-built_in">bool</span> initialized = <span class="hljs-keyword">false</span>;<br><br>initialize() &#123;<br>  a = <span class="hljs-built_in">Type</span>(<span class="hljs-string">&#x27;A&#x27;</span>);<br>  initialized = <span class="hljs-keyword">true</span>;<br>&#125;<br><br>doSomeWorkEnsureInitialized() &#123;<br>  <span class="hljs-keyword">if</span> (a == <span class="hljs-keyword">null</span>) &#123;<br>    <span class="hljs-keyword">if</span> (!initialized) &#123;<br>      intialize();<br>    &#125;<br>  &#125;<br>  doWork();<br>&#125;<br><br><span class="hljs-comment">// 不使用 late 关键字</span><br><span class="hljs-built_in">Type?</span> a;<br><br>doSomeWorkEnsureInitialized() &#123;<br>  <span class="hljs-keyword">if</span> (a == <span class="hljs-keyword">null</span>) &#123;<br>    initialize();<br>  &#125;<br>  doWork();<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="CONSIDER-copying-a-nullable-field-to-a-local-variable-to-enable-type-promotion"><a href="#CONSIDER-copying-a-nullable-field-to-a-local-variable-to-enable-type-promotion" class="headerlink" title="CONSIDER copying a nullable field to a local variable to enable type promotion."></a>CONSIDER copying a nullable field to a local variable to enable type promotion.</h4><p>Dart 中有类型提升的机制，但是只适用于本地变量，因此，对于可为空的成员变量我们应该先将其拷贝成本地变量，然后再使用。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">final</span> Response? response;<br><br><span class="hljs-meta">@override</span><br><span class="hljs-built_in">String</span> toString() &#123;<br>  <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">this</span>.response;<br>  <span class="hljs-keyword">if</span> (response != <span class="hljs-keyword">null</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Could not complete upload to <span class="hljs-subst">$&#123;response.url&#125;</span> &quot;</span><br>        <span class="hljs-string">&quot;(error code <span class="hljs-subst">$&#123;response.errorCode&#125;</span>): <span class="hljs-subst">$&#123;response.reason&#125;</span>.&quot;</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Could not upload (no response).&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>但是要注意如果本地变量发生变化，要将其重新赋值到成员变量上。而且成员变量有可能在被拷贝之后发生了变化，则拷贝的本地变量已经「过时」了。</p>
<h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h3><h4 id="DO-use-adjacent-strings-to-concatenate-string-literals"><a href="#DO-use-adjacent-strings-to-concatenate-string-literals" class="headerlink" title="DO use adjacent strings to concatenate string literals."></a>DO use adjacent strings to concatenate string literals.</h4><p>Dart 中不需要使用 + 来连接两个字符，像 C 和 C++ 中一样，相邻的字符串会自动被拼接成同一个字符串。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;content1,&#x27;</span><span class="hljs-string">&#x27;content2,&#x27;</span>);<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Some very very long string text which cannot be put into one line, &#x27;</span><br>      <span class="hljs-string">&#x27;but can be put into adjacent line to be concatenated together without +&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-using-interpolation-to-compose-strings-and-values"><a href="#PREFER-using-interpolation-to-compose-strings-and-values" class="headerlink" title="PREFER using interpolation to compose strings and values."></a>PREFER using interpolation to compose strings and values.</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-string">&#x27;Hello, <span class="hljs-subst">$name</span>! You are <span class="hljs-subst">$&#123;year - birth&#125;</span> years old.&#x27;</span>; <span class="hljs-comment">// good</span><br><span class="hljs-string">&#x27;Hello, &#x27;</span> + name + <span class="hljs-string">&#x27;! You are &#x27;</span> + (year - birth).toString(); <span class="hljs-comment">// bad!</span><br></code></pre></td></tr></table></figure>

<h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><h4 id="DO-use-collection-literals-when-possible"><a href="#DO-use-collection-literals-when-possible" class="headerlink" title="DO use collection literals when possible."></a>DO use collection literals when possible.</h4><p>创建集合的时候使用字面量表达式，而不是默认构造器，因为字面量表达式还支持扩展表达式和集合 if 和集合 for 的操作。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br><span class="hljs-keyword">var</span> points = &lt;Point&gt;[];<br><span class="hljs-keyword">var</span> addresses = &lt;<span class="hljs-built_in">String</span>, Address&gt;&#123;&#125;;<br><span class="hljs-keyword">var</span> counts = &lt;<span class="hljs-built_in">int</span>&gt;&#123;&#125;;<br><br><span class="hljs-comment">// bad:</span><br><span class="hljs-keyword">var</span> points = <span class="hljs-built_in">List</span>&lt;Point&gt;.empty(growable: <span class="hljs-keyword">true</span>);<br><span class="hljs-keyword">var</span> addresses = <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, Address&gt;();<br><span class="hljs-keyword">var</span> counts = <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">int</span>&gt;();<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-use-length-to-see-if-a-collection-is-empty"><a href="#DON’T-use-length-to-see-if-a-collection-is-empty" class="headerlink" title="DON’T use .length to see if a collection is empty."></a>DON’T use <code>.length</code> to see if a collection is empty.</h4><p>使用 <code>isEmpty</code> 和 <code>isNotEmpty</code> 代替 <code>.length</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">if</span> (lunchBox.isEmpty) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;so hungry...&#x27;</span>;<br><span class="hljs-keyword">if</span> (words.isNotEmpty) <span class="hljs-keyword">return</span> words.join(<span class="hljs-string">&#x27; &#x27;</span>);<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-using-Iterable-forEach-with-a-function-literal"><a href="#AVOID-using-Iterable-forEach-with-a-function-literal" class="headerlink" title="AVOID using Iterable.forEach() with a function literal."></a>AVOID using <code>Iterable.forEach()</code> with a function literal.</h4><p>使用 for..in 代替 forEach()。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> person <span class="hljs-keyword">in</span> people) &#123;<br>  ...<br>&#125;<br><br><span class="hljs-comment">// bad:</span><br>people.forEach((person) &#123;<br>  ...<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-use-List-from-unless-you-intend-to-change-the-type-of-the-result"><a href="#DON’T-use-List-from-unless-you-intend-to-change-the-type-of-the-result" class="headerlink" title="DON’T use List.from() unless you intend to change the type of the result."></a>DON’T use <code>List.from()</code> unless you intend to change the type of the result.</h4><p>使用 <code>iterable.toList()</code> 代替 <code>List.from(iterable)</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> copy1 = iterable.toList();<br><span class="hljs-keyword">var</span> copy2 = <span class="hljs-built_in">List</span>.from(iterable);<br></code></pre></td></tr></table></figure>

<p>只有在需要修改集合类型的时候才使用 <code>List.from()</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2.33</span>, <span class="hljs-number">4</span>]; <span class="hljs-comment">// List&lt;num&gt;.</span><br>numbers.removeAt(<span class="hljs-number">1</span>); <span class="hljs-comment">// Now it only contains integers.</span><br><span class="hljs-keyword">var</span> ints = <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt;.from(numbers);<br></code></pre></td></tr></table></figure>

<h4 id="DO-use-whereType-to-filter-a-collection-by-type"><a href="#DO-use-whereType-to-filter-a-collection-by-type" class="headerlink" title="DO use whereType() to filter a collection by type."></a>DO use <code>whereType()</code> to filter a collection by type.</h4><p>使用 <code>whereType()</code> 根据类型筛选集合。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> objects = [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">var</span> ints = objects.whereType&lt;<span class="hljs-built_in">int</span>&gt;();<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-use-cast-when-a-nearby-operation-will-do"><a href="#DON’T-use-cast-when-a-nearby-operation-will-do" class="headerlink" title="DON’T use cast() when a nearby operation will do."></a>DON’T use <code>cast()</code> when a nearby operation will do.</h4><p>集合方法很多都支持泛型，所以除非必要，不要使用 <code>cast()</code> 进行类型转换。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> stuff = &lt;<span class="hljs-built_in">dynamic</span>&gt;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br><span class="hljs-keyword">var</span> ints = <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt;.from(stuff);<br><span class="hljs-comment">// var ints = stuff.toList().cast&lt;int&gt;();</span><br><br><span class="hljs-keyword">var</span> reciprocals = stuff.map&lt;<span class="hljs-built_in">double</span>&gt;((n) =&gt; <span class="hljs-number">1</span> / n);<br><span class="hljs-comment">// var reciprocals = stuff.map((n) =&gt; 1 / n).cast&lt;double&gt;();</span><br></code></pre></td></tr></table></figure>

<h4 id="AVOID-using-cast"><a href="#AVOID-using-cast" class="headerlink" title="AVOID using cast()."></a>AVOID using <code>cast()</code>.</h4><p>如非必要，尽量减少使用 <code>cast()</code> 转换集合类型，考虑使用以下方法代替：</p>
<ul>
<li><p>直接用目标类型创建集合。</p>
</li>
<li><p>遍历元素，对单个元素使用 <code>cast()</code>（使用时才转换）。</p>
</li>
<li><p>尽量使用 <strong><code>List.from()</code></strong> 代替 <code>cast()</code>。</p>
</li>
</ul>
<p><code>cast()</code> 方法会返回一个集合并且在每次操作时检查元素类型，如果你只在集合的少量元素上做操作则适合使用 <code>cast()</code> 方法，其它情况下，这种转换的性能开销都比较大。</p>
<h3 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h3><h4 id="DO-use-a-function-declaration-to-bind-a-function-to-a-name"><a href="#DO-use-a-function-declaration-to-bind-a-function-to-a-name" class="headerlink" title="DO use a function declaration to bind a function to a name."></a>DO use a function declaration to bind a function to a name.</h4><p>当使用局部方法的时候，如果需要有方法名，尽量直接使用方法声明，避免使用 lambd 表达式+变量给方法命名。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> main() &#123;<br>  <span class="hljs-comment">// good:</span><br>  localFunction() &#123;<br>    ...<br>  &#125;<br>  <br>  <span class="hljs-comment">// bad:</span><br>  <span class="hljs-keyword">var</span> localFunction = () &#123;<br>    ...<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-create-a-lambda-when-a-tear-off-will-do"><a href="#DON’T-create-a-lambda-when-a-tear-off-will-do" class="headerlink" title="DON’T create a lambda when a tear-off will do."></a>DON’T create a lambda when a tear-off will do.</h4><p>当使用匿名函数的时候，如果函数调用的方法所需的参数和函数的参数一致，则可以使用 tear-off 的语法，类似于 Java 中的方法引用。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br>names.forEach(<span class="hljs-built_in">print</span>);<br><br><span class="hljs-comment">// bad:</span><br>names.forEach((name) &#123;<br>  <span class="hljs-built_in">print</span>(name);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="DO-use-to-separate-a-named-parameter-from-its-default-value"><a href="#DO-use-to-separate-a-named-parameter-from-its-default-value" class="headerlink" title="DO use = to separate a named parameter from its default value."></a>DO use <code>=</code> to separate a named parameter from its default value.</h4><p>由于历史遗留问题，Dart 中允许使用 <code>:</code> 为参数设置默认值，最好的做法是用 <code>=</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br><span class="hljs-keyword">void</span> insert(<span class="hljs-built_in">Object</span> item, &#123;<span class="hljs-built_in">int</span> at = <span class="hljs-number">0</span>&#125;) &#123; ... &#125;<br><br><span class="hljs-comment">// bad:</span><br><span class="hljs-keyword">void</span> insert(<span class="hljs-built_in">Object</span> item, &#123;<span class="hljs-built_in">int</span> at: <span class="hljs-number">0</span>&#125;) &#123; ... &#125;<br></code></pre></td></tr></table></figure>

<h3 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h3><h4 id="DO-follow-a-consistent-rule-for-var-and-final-on-local-variables"><a href="#DO-follow-a-consistent-rule-for-var-and-final-on-local-variables" class="headerlink" title="DO follow a consistent rule for var and final on local variables."></a>DO follow a consistent rule for <code>var</code> and <code>final</code> on local variables.</h4><p>绝大多数局部变量都不需要有类型标注，而是直接使用 <code>var</code> 或者 <code>final</code> 关键字声明。我们可以选择以下两个原则的其中一个，不要同时使用两种方式：</p>
<ul>
<li>原则 A：如果是不会被重新赋值的变量，则使用 <code>final</code> 关键字，会被重新赋值的则使用 <code>var</code> 关键字。</li>
<li>原则 B：所有的局部变量一律都使用 <code>var</code> 关键字，只有顶层变量和成员变量才使用 <code>final</code> 关键字。</li>
</ul>
<p>推荐原则 B，更简单，且容易遵循。</p>
<h4 id="AVOID-storing-what-you-can-calculate"><a href="#AVOID-storing-what-you-can-calculate" class="headerlink" title="AVOID storing what you can calculate."></a>AVOID storing what you can calculate.</h4><p>原因是浪费内存，推荐使用 getters 代替。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span> </span>&#123;<br>  <span class="hljs-built_in">double</span> radius;<br><br>  Circle(<span class="hljs-keyword">this</span>.radius);<br><br>  <span class="hljs-comment">// 不要使用成员变量来保存需要计算得到的值，使用 getters</span><br>  <span class="hljs-built_in">double</span> <span class="hljs-keyword">get</span> area =&gt; pi * radius * radius;<br>  <span class="hljs-built_in">double</span> <span class="hljs-keyword">get</span> circumference =&gt; pi * <span class="hljs-number">2.0</span> * radius;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Members"><a href="#Members" class="headerlink" title="Members"></a>Members</h3><p>Dart 中，对象的成员可以是方法或者变量。</p>
<h4 id="DON’T-wrap-a-field-in-a-getter-and-setter-unnecessarily"><a href="#DON’T-wrap-a-field-in-a-getter-and-setter-unnecessarily" class="headerlink" title="DON’T wrap a field in a getter and setter unnecessarily."></a>DON’T wrap a field in a getter and setter unnecessarily.</h4><p>Dart 中访问属性和访问 getters/setters 的效果是一样的，每个属性默认会自动生成 getters/setters，所以没必要手动去写 getters/setters，如果是为了使属性不可访问，则应该使用私有属性。</p>
<h4 id="PREFER-using-a-final-field-to-make-a-read-only-property"><a href="#PREFER-using-a-final-field-to-make-a-read-only-property" class="headerlink" title="PREFER using a final field to make a read-only property."></a>PREFER using a <code>final</code> field to make a read-only property.</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span> </span>&#123;<br>  <span class="hljs-keyword">final</span> contents = [];<br>&#125;<br><br><span class="hljs-comment">// bad:</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span> </span>&#123;<br>  <span class="hljs-keyword">var</span> _contents;<br>  <span class="hljs-keyword">get</span> contents =&gt; _contents;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="CONSIDER-using-gt-for-simple-members"><a href="#CONSIDER-using-gt-for-simple-members" class="headerlink" title="CONSIDER using =&gt; for simple members."></a>CONSIDER using <code>=&gt;</code> for simple members.</h4><p>使用箭头表达式定义成员变量，最常见的用法是用于创建 getters。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-built_in">double</span> <span class="hljs-keyword">get</span> right =&gt; left + width;<br><span class="hljs-keyword">set</span> right(<span class="hljs-built_in">double</span> value) =&gt; left = value - width;<br><br><span class="hljs-built_in">String</span> capitalize(<span class="hljs-built_in">String</span> name) =&gt;<br>    <span class="hljs-string">&#x27;<span class="hljs-subst">$&#123;name[<span class="hljs-number">0</span>].toUpperCase()&#125;</span><span class="hljs-subst">$&#123;name.substring(<span class="hljs-number">1</span>)&#125;</span>&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-use-this-except-to-redirect-to-a-named-constructor-or-to-avoid-shadowing"><a href="#DON’T-use-this-except-to-redirect-to-a-named-constructor-or-to-avoid-shadowing" class="headerlink" title="DON’T use this. except to redirect to a named constructor or to avoid shadowing."></a>DON’T use <code>this.</code> except to redirect to a named constructor or to avoid shadowing.</h4><p>只有以下几种情况下才使用 <code>this</code> 关键字：</p>
<ul>
<li>构造器中引用成员变量；</li>
<li>构造器重定向到某个具名构造器时；</li>
<li>成员变量与局部变量或者参数同名时；</li>
</ul>
<p>有趣的是，在构造器初始化列表中，可以区分出同名参数，所以不需要使用 <code>this</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseBox</span> </span>&#123;<br>  <span class="hljs-keyword">var</span> value;<br><br>  Box(value)<br>      : value = value,<br>        <span class="hljs-keyword">super</span>(value);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DO-initialize-fields-at-their-declaration-when-possible"><a href="#DO-initialize-fields-at-their-declaration-when-possible" class="headerlink" title="DO initialize fields at their declaration when possible."></a>DO initialize fields at their declaration when possible.</h4><p>如果成员属性不依赖构造器初始化，则应该尽量在声明处进行初始化。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProfileMark</span> </span>&#123;<br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> name;<br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">DateTime</span> start = <span class="hljs-built_in">DateTime</span>.now();<br><br>  ProfileMark(<span class="hljs-keyword">this</span>.name);<br>  ProfileMark.unnamed() : name = <span class="hljs-string">&#x27;&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Constructors"><a href="#Constructors" class="headerlink" title="Constructors"></a>Constructors</h3><h4 id="DO-use-initializing-formals-when-possible"><a href="#DO-use-initializing-formals-when-possible" class="headerlink" title="DO use initializing formals when possible."></a>DO use initializing formals when possible.</h4><p>在构造器参数前使用 <code>this.</code> 叫做 <em>initializing formal</em>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span> </span>&#123;<br>  <span class="hljs-built_in">double</span> x, y;<br>  Point(<span class="hljs-keyword">this</span>.x, <span class="hljs-keyword">this</span>.y);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-use-late-when-a-constructor-initializer-list-will-do"><a href="#DON’T-use-late-when-a-constructor-initializer-list-will-do" class="headerlink" title="DON’T use late when a constructor initializer list will do."></a>DON’T use <code>late</code> when a constructor initializer list will do.</h4><p>如果成员变量会在构造器中进行初始化，就应该避免将其标记为 <code>late</code>。</p>
<h4 id="DO-use-instead-of-for-empty-constructor-bodies"><a href="#DO-use-instead-of-for-empty-constructor-bodies" class="headerlink" title="DO use ; instead of {} for empty constructor bodies."></a>DO use <code>;</code> instead of <code>&#123;&#125;</code> for empty constructor bodies.</h4><p>构造器方法体为空时使用 <code>;</code> 结束构造器，避免使用空方法体。</p>
<h4 id="DON’T-use-new"><a href="#DON’T-use-new" class="headerlink" title="DON’T use new."></a>DON’T use <code>new</code>.</h4><p>避免使用 <code>new</code> 关键字，同样是 Dart 的历史遗留问题。</p>
<h4 id="DON’T-use-const-redundantly"><a href="#DON’T-use-const-redundantly" class="headerlink" title="DON’T use const redundantly."></a>DON’T use <code>const</code> redundantly.</h4><p>以下几种情况下，不需要使用 <code>const</code> 关键字：</p>
<ul>
<li>在一个 <code>const</code> 的集合中；</li>
<li>在一个 <code>const</code> 构造器中，其中每个参数都是 const 的；</li>
<li>在元数据注解中；</li>
<li><code>const</code> 常量的初始化器；</li>
<li>在 switch..case 表达式中，case 之后 : 之前的值默认也是 <code>const</code> 的；</li>
</ul>
<h3 id="Error-handling"><a href="#Error-handling" class="headerlink" title="Error handling"></a>Error handling</h3><h4 id="AVOID-catches-without-on-clauses"><a href="#AVOID-catches-without-on-clauses" class="headerlink" title="AVOID catches without on clauses."></a>AVOID catches without <code>on</code> clauses.</h4><p>如果 catch 子句没有使用 <code>on</code> 关键字限定捕捉的异常类型，则会捕捉所有类型的异常，这样我们就没法得到程序出错的具体原因了，到底是 stackoverflow 还是参数异常，又或者是断言条件未满足？所以，哪怕是只捕捉 <a target="_blank" rel="noopener" href="https://api.dart.dev/stable/dart-core/Exception-class.html"><code>Exception</code></a> 也比捕捉全部异常好，Exception 代表程序运行时异常，排除了编码错误造成的异常。</p>
<h4 id="DON’T-discard-errors-from-catches-without-on-clauses"><a href="#DON’T-discard-errors-from-catches-without-on-clauses" class="headerlink" title="DON’T discard errors from catches without on clauses."></a>DON’T discard errors from catches without <code>on</code> clauses.</h4><p>如果你执意捕捉所有异常，请不要丢弃异常内容，至少打印一下好吗？</p>
<h4 id="DO-throw-objects-that-implement-Error-only-for-programmatic-errors"><a href="#DO-throw-objects-that-implement-Error-only-for-programmatic-errors" class="headerlink" title="DO throw objects that implement Error only for programmatic errors."></a>DO throw objects that implement <code>Error</code> only for programmatic errors.</h4><p>所有的编码异常都继承自 <a target="_blank" rel="noopener" href="https://api.dart.dev/stable/dart-core/Error-class.html"><code>Error</code></a> 类，如果是运行时异常造成的错误，则应该抛出运行时异常，尽量在编码异常中排除掉运行时异常。</p>
<h4 id="DON’T-explicitly-catch-Error-or-types-that-implement-it"><a href="#DON’T-explicitly-catch-Error-or-types-that-implement-it" class="headerlink" title="DON’T explicitly catch Error or types that implement it."></a>DON’T explicitly catch <code>Error</code> or types that implement it.</h4><p>实现了 Error 类的大多是编码异常，这类异常可以告诉我们程序出错的信息，通常不应该捕捉这类异常。</p>
<h4 id="DO-use-rethrow-to-rethrow-a-caught-exception"><a href="#DO-use-rethrow-to-rethrow-a-caught-exception" class="headerlink" title="DO use rethrow to rethrow a caught exception."></a>DO use <code>rethrow</code> to rethrow a caught exception.</h4><p><code>throw</code> 会重置错误栈信息，而 <code>rethrow</code> 则不会。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">try</span> &#123;<br>  somethingRisky();<br>&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>  <span class="hljs-keyword">if</span> (!canHandle(e)) <span class="hljs-keyword">rethrow</span>;<br>  handle(e);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Asynchrony"><a href="#Asynchrony" class="headerlink" title="Asynchrony"></a>Asynchrony</h3><h4 id="PREFER-async-await-over-using-raw-futures"><a href="#PREFER-async-await-over-using-raw-futures" class="headerlink" title="PREFER async/await over using raw futures."></a>PREFER async/await over using raw futures.</h4><p><code>async</code> / <code>await</code> 语法可以提升代码的可读性，并且是的程序更容易 debug。</p>
<h4 id="DON’T-use-async-when-it-has-no-useful-effect"><a href="#DON’T-use-async-when-it-has-no-useful-effect" class="headerlink" title="DON’T use async when it has no useful effect."></a>DON’T use <code>async</code> when it has no useful effect.</h4><p>虽然异步场景下优先推荐使用 <code>async</code>，但是注意不要滥用 <code>async</code>。满足以下条件时才推荐使用 <code>async</code>：</p>
<ul>
<li>使用了 <code>await</code>.（废话）</li>
<li>需要异步返回异常，使用 <code>async</code> 比使用 Future.error() 更简洁。</li>
<li>需要返回一个 Future 对象，使用 <code>async</code> 比使用 Future.value() 更简洁。</li>
</ul>
<h4 id="CONSIDER-using-higher-order-methods-to-transform-a-stream"><a href="#CONSIDER-using-higher-order-methods-to-transform-a-stream" class="headerlink" title="CONSIDER using higher-order methods to transform a stream."></a>CONSIDER using higher-order methods to transform a stream.</h4><p><a target="_blank" rel="noopener" href="https://dart.dev/tutorials/language/streams"><code>Stream</code></a> 和集合类似，包含一些诸如 every, any, distinct 等便捷的转换操作，避免手动转换。</p>
<h4 id="AVOID-using-Completer-directly"><a href="#AVOID-using-Completer-directly" class="headerlink" title="AVOID using Completer directly."></a>AVOID using Completer directly.</h4><p>Completer 是比较底层的类，应该避免使用，大多数场景下用 <code>async</code>/<code>await</code> 就足够了。</p>
<h4 id="DO-test-for-Future-lt-T-gt-when-disambiguating-a-FutureOr-lt-T-gt-whose-type-argument-could-be-Object"><a href="#DO-test-for-Future-lt-T-gt-when-disambiguating-a-FutureOr-lt-T-gt-whose-type-argument-could-be-Object" class="headerlink" title="DO test for Future&lt;T&gt; when disambiguating a FutureOr&lt;T&gt; whose type argument could be Object."></a>DO test for <code>Future&lt;T&gt;</code> when disambiguating a <code>FutureOr&lt;T&gt;</code> whose type argument could be <code>Object</code>.</h4><p>在使用 <a target="_blank" rel="noopener" href="https://api.dart.dev/stable/2.13.0/dart-async/FutureOr-class.html"><code>FutureOr&lt;T&gt;</code></a> 之前，你通常需要先用 <code>is</code> 关键字判断其类型。因为 T 有可能是 Object，而 FutureOr&lt;&gt; 本身也是 Object，所以要用 <code>Future&lt;T&gt;</code> 作为判断依据。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dart">Future&lt;T&gt; logValue&lt;T&gt;(FutureOr&lt;T&gt; value) <span class="hljs-keyword">async</span> &#123;<br>  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">is</span> Future&lt;T&gt;) &#123;<br>    <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> value;<br>    <span class="hljs-built_in">print</span>(result);<br>    <span class="hljs-keyword">return</span> result;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">print</span>(value);<br>    <span class="hljs-keyword">return</span> value;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Design-Guide"><a href="#Design-Guide" class="headerlink" title="Design Guide"></a>Design Guide</h2><h3 id="Names"><a href="#Names" class="headerlink" title="Names"></a>Names</h3><h4 id="DO-use-terms-consistently"><a href="#DO-use-terms-consistently" class="headerlink" title="DO use terms consistently."></a>DO use terms consistently.</h4><p>在整个代码库中保持用相同的名称命名相同的物体，尽量使用被大众接受或者共同认可的方式命名。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart">pageCount         <span class="hljs-comment">// A field.</span><br>updatePageCount() <span class="hljs-comment">// Consistent with pageCount.</span><br>toSomething()     <span class="hljs-comment">// Consistent with Iterable&#x27;s toList().</span><br>asSomething()     <span class="hljs-comment">// Consistent with List&#x27;s asMap().</span><br>Point             <span class="hljs-comment">// A familiar concept.</span><br></code></pre></td></tr></table></figure>

<h4 id="AVOID-abbreviations"><a href="#AVOID-abbreviations" class="headerlink" title="AVOID abbreviations."></a>AVOID abbreviations.</h4><p>尽量避免使用缩写，除非是非常常见的缩写。</p>
<h4 id="PREFER-putting-the-most-descriptive-noun-last"><a href="#PREFER-putting-the-most-descriptive-noun-last" class="headerlink" title="PREFER putting the most descriptive noun last."></a>PREFER putting the most descriptive noun last.</h4><p>最后一个单词一定是最具描述性、最能总结该类用途的名词。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart">StatelessWidget<br>DownloadPage<br>AnimationController<br>OutlineInputBorder<br></code></pre></td></tr></table></figure>

<h4 id="CONSIDER-making-the-code-read-like-a-sentence"><a href="#CONSIDER-making-the-code-read-like-a-sentence" class="headerlink" title="CONSIDER making the code read like a sentence."></a>CONSIDER making the code read like a sentence.</h4><p>尽量使你的代码读起来可以像读文章一样易懂。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">if</span> (serviceTable.isEmpty) &#123;<br>  serviceTable.addAll(waitingList.where(<br>          (customer) =&gt; customer.waitingMinutes &gt; <span class="hljs-number">30</span>));<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-a-noun-phrase-for-a-non-boolean-property-or-variable"><a href="#PREFER-a-noun-phrase-for-a-non-boolean-property-or-variable" class="headerlink" title="PREFER a noun phrase for a non-boolean property or variable."></a>PREFER a noun phrase for a non-boolean property or variable.</h4><p>尽量使用名词命名非布尔类型的属性或变量。</p>
<h4 id="PREFER-a-non-imperative-verb-phrase-for-a-boolean-property-or-variable"><a href="#PREFER-a-non-imperative-verb-phrase-for-a-boolean-property-or-variable" class="headerlink" title="PREFER a non-imperative verb phrase for a boolean property or variable."></a>PREFER a non-imperative verb phrase for a boolean property or variable.</h4><p>使用非祈使<strong>动词</strong>命名布尔类型的属性或变量。布尔类型的变量一般代表某种状态或者能力。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dart">isEmpty<br>hasElements<br>canClose<br>closesWindow<br>canShowPopup<br>hasShownPopup<br></code></pre></td></tr></table></figure>

<h4 id="CONSIDER-omitting-the-verb-for-a-named-boolean-parameter"><a href="#CONSIDER-omitting-the-verb-for-a-named-boolean-parameter" class="headerlink" title="CONSIDER omitting the verb for a named boolean parameter."></a>CONSIDER omitting the verb for a named boolean <em>parameter</em>.</h4><p>具名参数一般可以省略动词，使用形容词。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> copy = <span class="hljs-built_in">List</span>.from(elements, growable: <span class="hljs-keyword">true</span>);<br><span class="hljs-keyword">var</span> copy = <span class="hljs-built_in">List</span>.from(elements, canGrow: <span class="hljs-keyword">true</span>); <span class="hljs-comment">// 哪一种更好？</span><br></code></pre></td></tr></table></figure>

<h4 id="PREFER-the-“positive”-name-for-a-boolean-property-or-variable"><a href="#PREFER-the-“positive”-name-for-a-boolean-property-or-variable" class="headerlink" title="PREFER the “positive” name for a boolean property or variable."></a>PREFER the “positive” name for a boolean property or variable.</h4><p>对于布尔值，尽量使用有价值、有意义、有用的值作为 true 值等。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">if</span> (socket.isConnected &amp;&amp; database.hasData) &#123;<br>  socket.write(database.read());<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-an-imperative-verb-phrase-for-a-function-or-method-whose-main-purpose-is-a-side-effect"><a href="#PREFER-an-imperative-verb-phrase-for-a-function-or-method-whose-main-purpose-is-a-side-effect" class="headerlink" title="PREFER an imperative verb phrase for a function or method whose main purpose is a side effect."></a>PREFER an imperative verb phrase for a function or method whose main purpose is a side effect.</h4><p>使用祈使动词短语命名那些具有 “side effect” 的方法名，side effect 即会改变对象的内部状态，比如属性等，或者产生一些新数据，或者会引起外部其它对象发生变化等等。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">queue.removeFirst();<br><span class="hljs-built_in">window</span>.refresh();<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose"><a href="#PREFER-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose" class="headerlink" title="PREFER a noun phrase or non-imperative verb phrase for a function or method if returning a value is its primary purpose."></a>PREFER a noun phrase or non-imperative verb phrase for a function or method if returning a value is its primary purpose.</h4><p>如果方法的主要用途是返回值，那么应该使用名词短语或者非祈使动词短语作为方法名。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> element = list.elementAt(<span class="hljs-number">3</span>);<br><span class="hljs-keyword">var</span> first = list.firstWhere(condition);<br><span class="hljs-keyword">var</span> char = string.codeUnitAt(<span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure>

<h4 id="CONSIDER-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs"><a href="#CONSIDER-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs" class="headerlink" title="CONSIDER an imperative verb phrase for a function or method if you want to draw attention to the work it performs."></a>CONSIDER an imperative verb phrase for a function or method if you want to draw attention to the work it performs.</h4><p>当方法不产生任何 side effect 但是会比较消耗资源或者做一些有可能出错的操作时，也要使用祈使动词短语命名。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> table = database.downloadData();<br><span class="hljs-keyword">var</span> packageVersions = packageGraph.solveConstraints();<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-starting-a-method-name-with-get"><a href="#AVOID-starting-a-method-name-with-get" class="headerlink" title="AVOID starting a method name with get."></a>AVOID starting a method name with <code>get</code>.</h4><p>大多数方法都应该直接省略 get 直接描述方法作用，比如使用 <code>packageSortOrder()</code> 而不是 <code>getPackageSortOrder()</code>。</p>
<h4 id="PREFER-naming-a-method-toXxx-if-it-copies-the-object’s-state-to-a-new-object"><a href="#PREFER-naming-a-method-toXxx-if-it-copies-the-object’s-state-to-a-new-object" class="headerlink" title="PREFER naming a method toXxx() if it copies the object’s state to a new object."></a>PREFER naming a method <code>toXxx()</code> if it copies the object’s state to a new object.</h4><p>如果方法的主要用途是将一个对象复制并转换为另一个对象时，尽量使用 toXxx() 命名。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart">list.toSet();<br>stackTrace.toString();<br>dateTime.toLocal();<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-naming-a-method-asXxx-if-it-returns-a-different-representation-backed-by-the-original-object"><a href="#PREFER-naming-a-method-asXxx-if-it-returns-a-different-representation-backed-by-the-original-object" class="headerlink" title="PREFER naming a method asXxx() if it returns a different representation backed by the original object."></a>PREFER naming a method <code>asXxx()</code> if it returns a different representation backed by the original object.</h4><p>如果方法的主要用途是基于一个对象包装转换成另一个对象时，尽量使用 asXxx() 命名。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> map = table.asMap();<br><span class="hljs-keyword">var</span> list = bytes.asFloat32List();<br><span class="hljs-keyword">var</span> future = subscription.asFuture();<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-describing-the-parameters-in-the-function’s-or-method’s-name"><a href="#AVOID-describing-the-parameters-in-the-function’s-or-method’s-name" class="headerlink" title="AVOID describing the parameters in the function’s or method’s name."></a>AVOID describing the parameters in the function’s or method’s name.</h4><p>方法名中不要带有参数相关的信息。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br>list.add(element);<br>map.remove(key);<br><br><span class="hljs-comment">// bad:</span><br>list.addElement(element);<br>map.removeKey(key);<br></code></pre></td></tr></table></figure>

<p>只有在为了区分多种功能类似的方法时才可以忽略该原则：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">map.containsKey(key);<br>map.containsValue(value);<br></code></pre></td></tr></table></figure>

<h4 id="DO-follow-existing-mnemonic-conventions-when-naming-type-parameters"><a href="#DO-follow-existing-mnemonic-conventions-when-naming-type-parameters" class="headerlink" title="DO follow existing mnemonic conventions when naming type parameters."></a>DO follow existing mnemonic conventions when naming type parameters.</h4><p>使用现有的助记规则命名类型参数，比如 E 代表集合中的 Element，K/V 代表 Map 的 key/value，R 代表类或方法的 return 值，其它情况使用 T/S/U/N/E 等。</p>
<h3 id="Libraries-1"><a href="#Libraries-1" class="headerlink" title="Libraries"></a>Libraries</h3><p>Dart 中使用下划线 __ 代表成员是库私有的，这不仅仅是约定俗成的，更是在语法层面做出的规定。</p>
<h4 id="PREFER-making-declarations-private"><a href="#PREFER-making-declarations-private" class="headerlink" title="PREFER making declarations private."></a>PREFER making declarations private.</h4><p>对于库的作者而言，这点尤为重要，要尽可能减少暴露接口给库的使用者，只暴露必须使用到的接口。</p>
<h4 id="CONSIDER-declaring-multiple-classes-in-the-same-library"><a href="#CONSIDER-declaring-multiple-classes-in-the-same-library" class="headerlink" title="CONSIDER declaring multiple classes in the same library."></a>CONSIDER declaring multiple classes in the same library.</h4><p>Dart 中每个文件都是一个 library，但是不像 Java 等语言一个文件通常只能代表一个类，Dart 中可以在相同的 library 中包含多个类、顶层变量和方法，只要这些类、变量和方法的确相互联系并且构成一个功能模块就可以了。</p>
<p>将多个类放在一起有诸多好处。因为私有访问权限仅限于库层级，而不是类层级，所以在同一个库中是可以访问其它类中的私有属性和方法的。</p>
<h3 id="Classes-and-mixins"><a href="#Classes-and-mixins" class="headerlink" title="Classes and mixins"></a>Classes and mixins</h3><p>Dart 是一个纯面向对象的语言，这意味这所有对象都是类的实例。但是另一方面，Dart 有可以像面向过程或者函数式编程一样拥有顶层方法和变量。</p>
<h4 id="AVOID-defining-a-one-member-abstract-class-when-a-simple-function-will-do"><a href="#AVOID-defining-a-one-member-abstract-class-when-a-simple-function-will-do" class="headerlink" title="AVOID defining a one-member abstract class when a simple function will do."></a>AVOID defining a one-member abstract class when a simple function will do.</h4><p>当类中只有一个方法或者变量的时候，考虑使用顶层变量或者方法代替。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br><span class="hljs-keyword">typedef</span> Predicate&lt;E&gt; = <span class="hljs-built_in">bool</span> <span class="hljs-built_in">Function</span>(E element);<br><br><span class="hljs-comment">// bad:</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Predicate</span>&lt;<span class="hljs-title">E</span>&gt; </span>&#123;<br>  <span class="hljs-built_in">bool</span> test(E element);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-defining-a-class-that-contains-only-static-members"><a href="#AVOID-defining-a-class-that-contains-only-static-members" class="headerlink" title="AVOID defining a class that contains only static members."></a>AVOID defining a class that contains only static members.</h4><p>Java C# 等语言必须将方法、变量和常量定义在类之中，比如 Java 中，我们常常会用一个 Constants 类来保存全局使用到的一些静态常量。而且为了避免命名冲突，我们常常会使用类名区分相同名字的方法。Dart 中没有这样的限制，相反，Dart 使用 library 作为命名空间，并且在导入包的时候可以使用 <code>as</code>/<code>show</code>/<code>hide</code> 等关键字避免冲突的命名。</p>
<p>我们可以将静态方法或静态成员变量转换成顶层方法或常量，然后以合适的方式命名或者整理进同一个库中。当然，这个规则不一定必须要遵循，一些场合下可能还是使用类和静态成员变量更合适：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Color</span> </span>&#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> red = <span class="hljs-string">&#x27;#f00&#x27;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> green = <span class="hljs-string">&#x27;#0f0&#x27;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> blue = <span class="hljs-string">&#x27;#00f&#x27;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> black = <span class="hljs-string">&#x27;#000&#x27;</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> white = <span class="hljs-string">&#x27;#fff&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-extending-a-class-that-isn’t-intended-to-be-subclassed"><a href="#AVOID-extending-a-class-that-isn’t-intended-to-be-subclassed" class="headerlink" title="AVOID extending a class that isn’t intended to be subclassed."></a>AVOID extending a class that isn’t intended to be subclassed.</h4><p>有些类可能本意就不是为了被继承而设计的，所以尽量用合适的命名告诉库的使用者哪些类可以被继承而哪些类不行。</p>
<h4 id="DO-document-if-your-class-supports-being-extended"><a href="#DO-document-if-your-class-supports-being-extended" class="headerlink" title="DO document if your class supports being extended."></a>DO document if your class supports being extended.</h4><p>同上，如果一个类可以被继承，至少用注释说明一些需要注意的地方。</p>
<h4 id="AVOID-implementing-a-class-that-isn’t-intended-to-be-an-interface"><a href="#AVOID-implementing-a-class-that-isn’t-intended-to-be-an-interface" class="headerlink" title="AVOID implementing a class that isn’t intended to be an interface."></a>AVOID implementing a class that isn’t intended to be an interface.</h4><p>同样的，如果一个接口不应该被实现，而使用者却实现了这个接口，那么当未来库的作者对这个接口做任何改动，都会影响到使用者的原有的实现。</p>
<h4 id="DO-document-if-your-class-supports-being-used-as-an-interface"><a href="#DO-document-if-your-class-supports-being-used-as-an-interface" class="headerlink" title="DO document if your class supports being used as an interface."></a>DO document if your class supports being used as an interface.</h4><p>如果一个接口可以被实现，需要在文档注释中说明。</p>
<h4 id="DO-use-mixin-to-define-a-mixin-type"><a href="#DO-use-mixin-to-define-a-mixin-type" class="headerlink" title="DO use mixin to define a mixin type."></a>DO use <code>mixin</code> to define a mixin type.</h4><p>Dart 从版本 2.1.0 之后才添加了 <code>mixin</code> 关键字，在这之前，任何没有默认构造器、没有父类的类都可以被用做 mixin，这带来了一个问题，有些类可能并不适合用做 mixin，误用它们可能会带来一些问题。而使用了 <code>mixin</code> 关键字之后，<code>mixin</code> 类只能被用做 mixins，而不能用做其它用途。</p>
<h4 id="AVOID-mixing-in-a-type-that-isn’t-intended-to-be-a-mixin"><a href="#AVOID-mixing-in-a-type-that-isn’t-intended-to-be-a-mixin" class="headerlink" title="AVOID mixing in a type that isn’t intended to be a mixin."></a>AVOID mixing in a type that isn’t intended to be a mixin.</h4><p>同上。</p>
<h3 id="Constructors-1"><a href="#Constructors-1" class="headerlink" title="Constructors"></a>Constructors</h3><p>Dart 中构造器是一类特殊的方法，用于创建类的实例，它的方法名和类名相同，没有返回值，并且除此之外还可以用 <code>.</code> 分割，后面加标识符，这类构造器叫具名构造器。</p>
<h4 id="CONSIDER-making-your-constructor-const-if-the-class-supports-it"><a href="#CONSIDER-making-your-constructor-const-if-the-class-supports-it" class="headerlink" title="CONSIDER making your constructor const if the class supports it."></a>CONSIDER making your constructor <code>const</code> if the class supports it.</h4><p>如果类中的成员变量都是 final 的，而且构造器只是初始化了这些成员变量，那么可以用 <code>const</code> 修饰构造器。这样，使用该类的开发者就可以在需要使用常量的地方使用该类的对象了，比如在其它常量容器中，switch..case 中，默认参数值等等。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Pet</span> </span>&#123;<br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> name;<br>  <br>  <span class="hljs-keyword">const</span> Pet(<span class="hljs-keyword">this</span>.name);<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PetShop</span> </span>&#123;<br>  Pet pet;<br><br>  <span class="hljs-comment">// Error: The default value of an optional parameter must be constant.</span><br>  <span class="hljs-comment">// PetShop(&#123;this.pet = Pet(&#x27;Cat&#x27;)&#125;); </span><br>  <br>  PetShop([<span class="hljs-keyword">this</span>.pet = <span class="hljs-keyword">const</span> Pet(<span class="hljs-string">&#x27;Cat&#x27;</span>)]);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Members-1"><a href="#Members-1" class="headerlink" title="Members"></a>Members</h3><h4 id="PREFER-making-fields-and-top-level-variables-final"><a href="#PREFER-making-fields-and-top-level-variables-final" class="headerlink" title="PREFER making fields and top-level variables final."></a>PREFER making fields and top-level variables <code>final</code>.</h4><p>尽量将成员变量和顶层变量设为 <code>final</code> 的。</p>
<h4 id="DO-use-getters-for-operations-that-conceptually-access-properties"><a href="#DO-use-getters-for-operations-that-conceptually-access-properties" class="headerlink" title="DO use getters for operations that conceptually access properties."></a>DO use getters for operations that conceptually access properties.</h4><p>在 API 设计中，使用 getters 还是使用方法作为访问某个数据的方式是个微妙但重要的部分。Dart 中成员变量会自动生成 getters，所以访问成员变量和访问 getters，其本质是一样的。所以，通常来说，访问 getters 给人的感觉就像是访问成员变量，它意味着：</p>
<ul>
<li>这种操作不需要接受参数，但是有返回值；</li>
<li>调用者只关心返回值；</li>
<li>这种操作并不会造成任何用户可见的 side effects；</li>
<li>这种操作具有幂等性，即无论调用多少次，结果相同；</li>
<li>返回的结果对象不会暴露原始对象的所有状态；</li>
</ul>
<p>如果你的目标操作符合以上所有特点，则可以将这种操作定义成一个 getter 而不是方法。</p>
<h4 id="DO-use-setters-for-operations-that-conceptually-change-properties"><a href="#DO-use-setters-for-operations-that-conceptually-change-properties" class="headerlink" title="DO use setters for operations that conceptually change properties."></a>DO use setters for operations that conceptually change properties.</h4><p>与 getters 类似，使用 setters 也会遇到类似的困境，不同的是 setters 需要满足 filed-like 特质：</p>
<ul>
<li>操作只接受一个参数，且不会产生返回值；</li>
<li>操作只会改变对象的某些状态；</li>
<li>操作具有等幂性；</li>
</ul>
<h4 id="DON’T-define-a-setter-without-a-corresponding-getter"><a href="#DON’T-define-a-setter-without-a-corresponding-getter" class="headerlink" title="DON’T define a setter without a corresponding getter."></a>DON’T define a setter without a corresponding getter.</h4><p>一个可被修改的 setter 往往对应着一个供访问的 getter。</p>
<h4 id="AVOID-using-runtime-type-tests-to-fake-overloading"><a href="#AVOID-using-runtime-type-tests-to-fake-overloading" class="headerlink" title="AVOID using runtime type tests to fake overloading."></a>AVOID using runtime type tests to fake overloading.</h4><p>Dart 中没有重载机制，有的人会定义一个方法，在方法中用 <code>is</code> 判断类型然后根据具体的类型做一些操作。这种操作虽然能达到目的，但是最好的做法还是使用一系列独立的方法，让用户根据不同的类型调用不同的方法。只有当一个对象具体类型不确定，需要在运行时根据不同的类型来调用特定的子类方法的时候，才可以把它们定义在一个方法内。</p>
<h4 id="AVOID-public-late-final-fields-without-initializers"><a href="#AVOID-public-late-final-fields-without-initializers" class="headerlink" title="AVOID public late final fields without initializers."></a>AVOID public <code>late final</code> fields without initializers.</h4><p>不像其它 <code>final</code> 成员变量，<code>late final</code> 的成员变量如果没有初始化器的话，Dart 会为它们生成 setters 函数，如果成员变量是 public 的，则意味着 setters 也是 public 的。我们将成员变量设置为 late 通常是希望稍后再去初始化它，比如在构造器中，而 <code>late final</code> 使得成员变量可能在被初始化之前就在外部被初始化了一遍。所以，最好的做法是：</p>
<ul>
<li>不要使用 <code>late</code>；</li>
<li>使用 <code>late</code> 但是在声明时为其初始化；</li>
<li>使用 <code>late</code> 但是将它标记为 private 的，同时为其提供一个 getter；</li>
</ul>
<h4 id="AVOID-returning-nullable-Future-Stream-and-collection-types"><a href="#AVOID-returning-nullable-Future-Stream-and-collection-types" class="headerlink" title="AVOID returning nullable Future, Stream, and collection types."></a>AVOID returning nullable <code>Future</code>, <code>Stream</code>, and collection types.</h4><p>如果返回的是容器类型，尽量避免返回空的容器类型，一般使用返回空的容器或者直接返回 null。</p>
<h4 id="AVOID-returning-this-from-methods-just-to-enable-a-fluent-interface"><a href="#AVOID-returning-this-from-methods-just-to-enable-a-fluent-interface" class="headerlink" title="AVOID returning this from methods just to enable a fluent interface."></a>AVOID returning <code>this</code> from methods just to enable a fluent interface.</h4><p>使用级联表达式而不是在方法中返回 <code>this</code> 实现链式调用。</p>
<h3 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h3><p>我们使用类型标注限制某部分代码能够使用什么样的值。类型通常出现在两个地方：变量声明处的类型标注 (<em>type annotations</em>) 和使用泛型时的类型参数 (<em>generic invocations</em>)。</p>
<p>类型标注通常就是我们所认为的静态类型，我们可以对变量、参数、属性、返回值使用类型标注，就像下面这个例子：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-built_in">bool</span> isEmpty(<span class="hljs-built_in">String</span> parameter) &#123; <span class="hljs-comment">// 返回值和参数的类型标注</span><br>  <span class="hljs-built_in">bool</span> result = parameter.isEmpty; <span class="hljs-comment">// 变量的类型标注</span><br>  <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>泛型调用时的类型参数可以是创建集合字面量，或者是调用泛型类的构造方法，或者是调用泛型方法。比如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> lists = &lt;<span class="hljs-built_in">num</span>&gt;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]; <span class="hljs-comment">// 创建集合时指定类型</span><br>lists.addAll(<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">num</span>&gt;.filled(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// 调用泛型类的构造器并指定类型</span><br>lists.cast&lt;<span class="hljs-built_in">int</span>&gt;(); <span class="hljs-comment">// 调用泛型方法</span><br></code></pre></td></tr></table></figure>

<h4 id="Type-inference"><a href="#Type-inference" class="headerlink" title="Type inference"></a>Type inference</h4><p>类型标注是可选的，因为 Dart 会根据当前上下文推断出具体类型。当缺乏足够的信息推断出类型的时候，Dart 默认会使用 <code>dynamic</code> 类型。这种机制让类型推断看起来是安全的，但实际上使得类型检查完全失效了。</p>
<p>同时拥有类型推断和 <code>dynamic</code> 类型，使得我们在说代码是无类型的 (untyped) 时产生歧义，一个变量到底是动态类型还是没有写类型参数？所以，我们一般不说代码是无类型的，而是使用以下术语代替：</p>
<ul>
<li>如果代码拥有类型标注，则它的类型即所标注的类型（废话）。</li>
<li>如果代码是推断类型，则说明 Dart 已经确定其类型。而如果类型推断失败，那么我们不把称它为 <em>inferred</em>。</li>
<li>如果代码是动态类型的，那么它的静态类型就是 <code>dynamic</code>。这种情况下，代码既可以是主动被标注为 <code>dynamic</code> 也可以是推断类型（使用 <code>var</code> 关键字）。</li>
</ul>
<p>换句话说，代码是标注类型还是推断类型，与它是否被标注为 <code>dynamic</code> 或者其它类型无关。</p>
<p>类型推断是个强有力的工具，可以帮助我们编码或阅读代码时跳过一些显而易见的部分（代码类型），让我们关注真正重要的代码逻辑。但是，显式的代码类型也同样重要，它可以帮助我们写出健壮、可维护的代码。</p>
<p>当然，类型推断也不是万能药，一些情况下还是应该使用类型标注。有时候类型推断提前确定了变量类型，但是该类型不是你想要的，比如变量在初始化后推断出了类型，但是你实际却想要使用另一个类型，这种情况下就只能使用显式的类型标注了。</p>
<p>理解上面这些概念之后，方便我们在解释接下来的这些原则时，不会造成歧义。首先，我们可以将大致的原则总结为以下几点：</p>
<ul>
<li>当上下文不足以推断出类型的时候，请使用类型标注，即使你想要的是 <code>dynamic</code> 类型；</li>
<li>不要标注局部变量或者泛型调用；</li>
<li>对于顶层变量和属性，尽量显式标注其类型，除非初始化器使得它们的类型显而易见；</li>
</ul>
<h4 id="DO-type-annotate-variables-without-initializers"><a href="#DO-type-annotate-variables-without-initializers" class="headerlink" title="DO type annotate variables without initializers."></a>DO type annotate variables without initializers.</h4><p>如果没有变量没有立即被初始化，请使用类型标注。</p>
<h4 id="DO-type-annotate-fields-and-top-level-variables-if-the-type-isn’t-obvious"><a href="#DO-type-annotate-fields-and-top-level-variables-if-the-type-isn’t-obvious" class="headerlink" title="DO type annotate fields and top-level variables if the type isn’t obvious."></a>DO type annotate fields and top-level variables if the type isn’t obvious.</h4><p>如果变量类型不是显而易见的，也要使用类型标注。</p>
<p>显而易见包括以下这些情况：</p>
<ul>
<li>字面量，如基本数据类型等</li>
<li>构造器中的参数</li>
<li>引用其它变量或者常量</li>
<li>简单的表达式，比如 isEmpty, ==, &gt; 等等</li>
<li>工厂方法，比如 int.parse(), Future.wait() 等</li>
</ul>
<p>另外，当你觉得类型标注可以使你的代码更清晰时，那就请使用类型标注。</p>
<p>When in doubt, add a type annotation.</p>
<h4 id="DON’T-redundantly-type-annotate-initialized-local-variables"><a href="#DON’T-redundantly-type-annotate-initialized-local-variables" class="headerlink" title="DON’T redundantly type annotate initialized local variables."></a>DON’T redundantly type annotate initialized local variables.</h4><p>有初始化器的局部变量不要使用类型标注。只有当你确定推断类型不是你想要的类型的时候才使用类型标注。</p>
<h4 id="DO-annotate-return-types-on-function-declarations"><a href="#DO-annotate-return-types-on-function-declarations" class="headerlink" title="DO annotate return types on function declarations."></a>DO annotate return types on function declarations.</h4><p>给方法返回值添加类型标注可以方便方法的调用者。当然，匿名方法就没必要了。</p>
<h4 id="DO-annotate-parameter-types-on-function-declarations"><a href="#DO-annotate-parameter-types-on-function-declarations" class="headerlink" title="DO annotate parameter types on function declarations."></a>DO annotate parameter types on function declarations.</h4><p>给方法的参数添加类型标注，同样很有必要，可以帮助方法的调用者确定参数的边界。</p>
<p>需要注意的是，Dart 不会对可选的参数做类型推断，<a target="_blank" rel="noopener" href="https://dart.dev/guides/language/effective-dart/design#do-annotate-parameter-types-on-function-declarations">来源</a>：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> sayRepeatedly(<span class="hljs-built_in">String</span> message, &#123;<span class="hljs-built_in">int</span> count = <span class="hljs-number">2</span>&#125;) &#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) &#123;<br>    <span class="hljs-built_in">print</span>(message);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-annotate-inferred-parameter-types-on-function-expressions"><a href="#DON’T-annotate-inferred-parameter-types-on-function-expressions" class="headerlink" title="DON’T annotate inferred parameter types on function expressions."></a>DON’T annotate inferred parameter types on function expressions.</h4><p>Dart 通常可以根据上下文确定匿名方法接收的参数是什么，所以匿名方法一般不需要添加类型标注。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> names = people.map((person) =&gt; person.name);<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-type-annotate-initializing-formals"><a href="#DON’T-type-annotate-initializing-formals" class="headerlink" title="DON’T type annotate initializing formals."></a>DON’T type annotate initializing formals.</h4><p>之前说过构造器中使用 <code>this.</code> 给属性赋值的形式叫做 <code>initializing formals</code>，这种情况下也不要使用类型标注。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span> </span>&#123;<br>  <span class="hljs-built_in">double</span> x, y;<br>  Point(<span class="hljs-keyword">this</span>.x, <span class="hljs-keyword">this</span>.y);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DO-write-type-arguments-on-generic-invocations-that-aren’t-inferred"><a href="#DO-write-type-arguments-on-generic-invocations-that-aren’t-inferred" class="headerlink" title="DO write type arguments on generic invocations that aren’t inferred."></a>DO write type arguments on generic invocations that aren’t inferred.</h4><p>一些情况下，泛型的类型无法被确定，比如空的集合，所以我们需要为它们标注类型。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> playerScores = &lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">int</span>&gt;&#123;&#125;;<br><span class="hljs-keyword">final</span> events = StreamController&lt;Event&gt;();<br><br><span class="hljs-comment">// 对于成员变量来说，如果类型同样无法推断出，则需要在声明处标注类型</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Downloader</span> </span>&#123;<br>  <span class="hljs-keyword">final</span> Completer&lt;<span class="hljs-built_in">String</span>&gt; response = Completer();<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-write-type-arguments-on-generic-invocations-that-are-inferred"><a href="#DON’T-write-type-arguments-on-generic-invocations-that-are-inferred" class="headerlink" title="DON’T write type arguments on generic invocations that are inferred."></a>DON’T write type arguments on generic invocations that are inferred.</h4><p>如果泛型类的类型已经推断出来，就不要在写类型了。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Downloader</span> </span>&#123;<br>  <span class="hljs-keyword">final</span> Completer&lt;<span class="hljs-built_in">String</span>&gt; response = Completer&lt;<span class="hljs-built_in">String</span>&gt;(); <span class="hljs-comment">// 错误示例</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-writing-incomplete-generic-types"><a href="#AVOID-writing-incomplete-generic-types" class="headerlink" title="AVOID writing incomplete generic types."></a>AVOID writing incomplete generic types.</h4><p>也就是不要使用 raw 泛型。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// bad:</span><br><span class="hljs-built_in">List</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">var</span> completer = Completer&lt;<span class="hljs-built_in">Map</span>&gt;();<br><br><span class="hljs-comment">// good:</span><br><span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">num</span>&gt; numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">var</span> completer = Completer&lt;<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">int</span>&gt;&gt;();<br></code></pre></td></tr></table></figure>

<h4 id="DO-annotate-with-dynamic-instead-of-letting-inference-fail"><a href="#DO-annotate-with-dynamic-instead-of-letting-inference-fail" class="headerlink" title="DO annotate with dynamic instead of letting inference fail."></a>DO annotate with <code>dynamic</code> instead of letting inference fail.</h4><p>显式标明 <code>dynamic</code> 永远要比不写类型标注要好。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br><span class="hljs-built_in">dynamic</span> mergeJson(<span class="hljs-built_in">dynamic</span> original, <span class="hljs-built_in">dynamic</span> changes) =&gt; ...<br><span class="hljs-comment">// bad:</span><br>mergeJson(original, changes) =&gt; ...<br></code></pre></td></tr></table></figure>

<p>当然，有些情况下，Dart 也能推断出 <code>dyanmic</code> 类型的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; readJson() =&gt; ...<br><br><span class="hljs-keyword">void</span> printUsers() &#123;<br>  <span class="hljs-keyword">var</span> json = readJson();<br>  <span class="hljs-keyword">var</span> users = json[<span class="hljs-string">&#x27;users&#x27;</span>];<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-signatures-in-function-type-annotations"><a href="#PREFER-signatures-in-function-type-annotations" class="headerlink" title="PREFER signatures in function type annotations."></a>PREFER signatures in function type annotations.</h4><p>默认的 Function 允许任何类型的返回值和参数，如果不带签名使用，在有些情况下会导致错误。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// good:</span><br><span class="hljs-built_in">bool</span> isValid(<span class="hljs-built_in">String</span> value, <span class="hljs-built_in">bool</span> <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">String</span>) test) =&gt; ...<br><span class="hljs-comment">// bad:</span><br><span class="hljs-built_in">bool</span> isValid(<span class="hljs-built_in">String</span> value, <span class="hljs-built_in">Function</span> test) =&gt; ...<br></code></pre></td></tr></table></figure>

<h4 id="DON’T-specify-a-return-type-for-a-setter"><a href="#DON’T-specify-a-return-type-for-a-setter" class="headerlink" title="DON’T specify a return type for a setter."></a>DON’T specify a return type for a setter.</h4><p>Dart 中 setters 只会返回 void，所以不需要写返回值。</p>
<h4 id="DON’T-use-the-legacy-typedef-syntax"><a href="#DON’T-use-the-legacy-typedef-syntax" class="headerlink" title="DON’T use the legacy typedef syntax."></a>DON’T use the legacy typedef syntax.</h4><p>又是一个历史遗留问题，Dart 中有两种方式定义 typedef，推荐使用新的写法。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// bad:</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">int</span> Comparison&lt;T&gt;(T a, T b);<br><span class="hljs-comment">// good:</span><br><span class="hljs-keyword">typedef</span> Comparison&lt;T&gt; = <span class="hljs-built_in">int</span> <span class="hljs-built_in">Function</span>(T a, T b);<br></code></pre></td></tr></table></figure>

<h4 id="PREFER-inline-function-types-over-typedefs"><a href="#PREFER-inline-function-types-over-typedefs" class="headerlink" title="PREFER inline function types over typedefs."></a>PREFER inline function types over typedefs.</h4><p>Dart 2 开始支持 inline function，我们可以直接定义方法作为类型签名。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FilteredObservable</span> </span>&#123;<br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> <span class="hljs-built_in">Function</span>(Event) _predicate;<br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;<span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>(Event)&gt; _observers;<br><br>  FilteredObservable(<span class="hljs-keyword">this</span>._predicate, <span class="hljs-keyword">this</span>._observers);<br><br>  <span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>(Event)? notify(Event event) &#123;<br>    <span class="hljs-keyword">if</span> (!_predicate(event)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>(Event)? last;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> observer <span class="hljs-keyword">in</span> _observers) &#123;<br>      observer(event);<br>      last = observer;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> last;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果方法很复杂或者多次使用的情况下，推荐使用 typedef 代替。</p>
<h4 id="PREFER-using-function-type-syntax-for-parameters"><a href="#PREFER-using-function-type-syntax-for-parameters" class="headerlink" title="PREFER using function type syntax for parameters."></a>PREFER using function type syntax for parameters.</h4><p>就像方法可以作为类型标注一样，方法也可以作为参数，并且有特殊的语法支持：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// 函数形式的参数：返回值 Function(参数类型) 参数名</span><br><span class="hljs-built_in">Iterable</span>&lt;T&gt; where(<span class="hljs-built_in">bool</span> <span class="hljs-built_in">Function</span>(T) predicate) =&gt; ...<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-using-dynamic-unless-you-want-to-disable-static-checking"><a href="#AVOID-using-dynamic-unless-you-want-to-disable-static-checking" class="headerlink" title="AVOID using dynamic unless you want to disable static checking."></a>AVOID using <code>dynamic</code> unless you want to disable static checking.</h4><p>Dart 中 <code>dynamic</code> 是一个非常特殊的类型，它的作用和 <code>Object?</code> 类似，都允许任何对象，包括 null，但是 <code>dynamic</code> 还有额外的功能，那就是默认允许任何操作，包括对任何成员的访问，无论这种访问是否有效或者合法，Dart 不会在编译期对其进行检查，如果有异常只会在运行期才会被抛出。除非你确认想要这种效果，否则还是使用 <code>Obejct?</code> 或者 <code>Object</code> 代替 <code>dynamic</code>，然后用 <code>is</code> 对类型进行进行检查和类型提升。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">Returns a Boolean representation for [arg], which must</span></span><br><span class="hljs-comment">/// <span class="language-markdown">be a String or bool.</span></span><br><span class="hljs-built_in">bool</span> convertToBool(<span class="hljs-built_in">Object</span> arg) &#123;<br>  <span class="hljs-keyword">if</span> (arg <span class="hljs-keyword">is</span> <span class="hljs-built_in">bool</span>) <span class="hljs-keyword">return</span> arg;<br>  <span class="hljs-keyword">if</span> (arg <span class="hljs-keyword">is</span> <span class="hljs-built_in">String</span>) <span class="hljs-keyword">return</span> arg.toLowerCase() == <span class="hljs-string">&#x27;true&#x27;</span>;<br>  <span class="hljs-keyword">throw</span> ArgumentError(<span class="hljs-string">&#x27;Cannot convert <span class="hljs-subst">$arg</span> to a bool.&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="DO-use-Future-lt-void-gt-as-the-return-type-of-asynchronous-members-that-do-not-produce-values"><a href="#DO-use-Future-lt-void-gt-as-the-return-type-of-asynchronous-members-that-do-not-produce-values" class="headerlink" title="DO use Future&lt;void&gt; as the return type of asynchronous members that do not produce values."></a>DO use <code>Future&lt;void&gt;</code> as the return type of asynchronous members that do not produce values.</h4><p>如果异步方法没有值需要返回，请使用 Future<void> 作为返回值。这样可以保证后续的操作，还有支持 await 等。</p>
<h4 id="AVOID-using-FutureOr-lt-T-gt-as-a-return-type"><a href="#AVOID-using-FutureOr-lt-T-gt-as-a-return-type" class="headerlink" title="AVOID using FutureOr&lt;T&gt; as a return type."></a>AVOID using <code>FutureOr&lt;T&gt;</code> as a return type.</h4><p>如果方法接受 <code>FutureOr&lt;int&gt;</code> 作为参数，那么它可以接收 int 或者 <code>Future&lt;int&gt;</code> 作为参数，这样可以方便调用者用 Future 包装 int 后再调用你的方法。但是，如果你返回 <code>FutureOr&lt;T&gt;</code>，方法的调用者就需要检查返回值到底是 int 还是 <code>Future&lt;int&gt;</code>。推荐的做法是直接返回 <code>Future&lt;T&gt;</code>，这样调用者可以直接使用 <code>await</code> 获取异步结果值。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">Future&lt;<span class="hljs-built_in">int</span>&gt; triple(FutureOr&lt;<span class="hljs-built_in">int</span>&gt; value) <span class="hljs-keyword">async</span> =&gt; (<span class="hljs-keyword">await</span> value) * <span class="hljs-number">3</span>;<br></code></pre></td></tr></table></figure>

<h3 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h3><h4 id="AVOID-positional-boolean-parameters"><a href="#AVOID-positional-boolean-parameters" class="headerlink" title="AVOID positional boolean parameters."></a>AVOID positional boolean parameters.</h4><p>可选布尔值不但容易让调用着分不清参数的含义，而且容易出错。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// bad:</span><br><span class="hljs-keyword">new</span> ListBox(<span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">true</span>);<br><span class="hljs-comment">// good:</span><br>ListBox(scroll: <span class="hljs-keyword">true</span>, showScrollbars: <span class="hljs-keyword">true</span>);<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-optional-positional-parameters-if-the-user-may-want-to-omit-earlier-parameters"><a href="#AVOID-optional-positional-parameters-if-the-user-may-want-to-omit-earlier-parameters" class="headerlink" title="AVOID optional positional parameters if the user may want to omit earlier parameters."></a>AVOID optional positional parameters if the user may want to omit earlier parameters.</h4><p>对于可选位置参数，调用者可能省略中间或者后面部分，尽量把关键部分写在前面，或者使用具名位置参数。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// 调用方可能省略一部分可选位置参数，因此，最重要的写在前面</span><br><span class="hljs-built_in">String</span>.fromCharCodes(<span class="hljs-built_in">Iterable</span>&lt;<span class="hljs-built_in">int</span>&gt; charCodes, [<span class="hljs-built_in">int</span> start = <span class="hljs-number">0</span>, <span class="hljs-built_in">int?</span> end]);<br><br><span class="hljs-comment">// 使用具名位置参数就没有这个烦恼了</span><br><span class="hljs-built_in">Duration</span>(<br>    &#123;<span class="hljs-built_in">int</span> days = <span class="hljs-number">0</span>,<br>    <span class="hljs-built_in">int</span> hours = <span class="hljs-number">0</span>,<br>    <span class="hljs-built_in">int</span> minutes = <span class="hljs-number">0</span>,<br>    <span class="hljs-built_in">int</span> seconds = <span class="hljs-number">0</span>,<br>    <span class="hljs-built_in">int</span> milliseconds = <span class="hljs-number">0</span>,<br>    <span class="hljs-built_in">int</span> microseconds = <span class="hljs-number">0</span>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="AVOID-mandatory-parameters-that-accept-a-special-“no-argument”-value"><a href="#AVOID-mandatory-parameters-that-accept-a-special-“no-argument”-value" class="headerlink" title="AVOID mandatory parameters that accept a special “no argument” value."></a>AVOID mandatory parameters that accept a special “no argument” value.</h4><p>不要强制用户传 null，使用可选参数代替。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// bad:</span><br><span class="hljs-keyword">var</span> rest = string.substring(start, <span class="hljs-keyword">null</span>);<br><span class="hljs-comment">// good:</span><br><span class="hljs-keyword">var</span> rest = string.substring(start);<br></code></pre></td></tr></table></figure>

<h4 id="DO-use-inclusive-start-and-exclusive-end-parameters-to-accept-a-range"><a href="#DO-use-inclusive-start-and-exclusive-end-parameters-to-accept-a-range" class="headerlink" title="DO use inclusive start and exclusive end parameters to accept a range."></a>DO use inclusive start and exclusive end parameters to accept a range.</h4><p>当方法接收的参数用数字下标表示范围时，尽量采用前闭后开的习俗，包括开头下标但是不包括结尾的下标。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].sublist(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// [1, 2]</span><br><span class="hljs-string">&#x27;abcd&#x27;</span>.substring(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// &#x27;bc&#x27;</span><br></code></pre></td></tr></table></figure>

<h3 id="Equality"><a href="#Equality" class="headerlink" title="Equality"></a>Equality</h3><h4 id="DO-override-hashCode-if-you-override"><a href="#DO-override-hashCode-if-you-override" class="headerlink" title="DO override hashCode if you override ==."></a>DO override <code>hashCode</code> if you override <code>==</code>.</h4><p>这是约定俗成的。两个对象相同则说明它们的哈希值一致，否则类似于 Map 等基于哈希值的集合就无法使用了。</p>
<h4 id="DO-make-your-operator-obey-the-mathematical-rules-of-equality"><a href="#DO-make-your-operator-obey-the-mathematical-rules-of-equality" class="headerlink" title="DO make your == operator obey the mathematical rules of equality."></a>DO make your <code>==</code> operator obey the mathematical rules of equality.</h4><ul>
<li>自反性：<code>a == a</code> 永远返回 true；</li>
<li>对称性：<code>a == b</code> 为 true 时 <code>b == a</code> 也必定为 true；</li>
<li>传递性：<code>a == b</code> 和 <code>b == c</code> 都为 true，则 <code>a == c</code> 也为 true；</li>
</ul>
<h4 id="AVOID-defining-custom-equality-for-mutable-classes"><a href="#AVOID-defining-custom-equality-for-mutable-classes" class="headerlink" title="AVOID defining custom equality for mutable classes."></a>AVOID defining custom equality for mutable classes.</h4><p>如果是可变的对象，比如拥有可变属性的对象，他们的哈希值会随着属性的变化而变化，但是大多数基于哈希的集合没有考虑到这一点，因此，最好不要自定义可变对象的相等性。</p>
<h4 id="DON’T-make-the-parameter-to-nullable"><a href="#DON’T-make-the-parameter-to-nullable" class="headerlink" title="DON’T make the parameter to == nullable."></a>DON’T make the parameter to <code>==</code> nullable.</h4><p>Dart 语言中 null 只能等于 null，因此，使用 <code>==</code> 比较对象时，右边的对象不能是 null。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> name;<br><br>  <span class="hljs-comment">// bad:</span><br>  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">operator</span> ==(<span class="hljs-built_in">Object?</span> other) =&gt;<br>      other != <span class="hljs-keyword">null</span> &amp;&amp; other <span class="hljs-keyword">is</span> Person &amp;&amp; name == other.name;<br>  <br>  <span class="hljs-comment">// good:</span><br>  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">operator</span> ==(<span class="hljs-built_in">Object</span> other) =&gt; other <span class="hljs-keyword">is</span> Person &amp;&amp; name == other.name;<br>&#125;<br></code></pre></td></tr></table></figure>
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/blog/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Style-Guide"><span class="toc-number">1.</span> <span class="toc-text">Style Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Identifiers"><span class="toc-number">1.1.</span> <span class="toc-text">Identifiers</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-name-types-using-UpperCamelCase"><span class="toc-number">1.1.1.</span> <span class="toc-text">DO name types using UpperCamelCase.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-name-libraries-packages-directories-and-source-files-using-lowercase-with-underscores"><span class="toc-number">1.1.2.</span> <span class="toc-text">DO name libraries, packages, directories, and source files using lowercase_with_underscores.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-name-import-prefixes-using-lowercase-with-underscores"><span class="toc-number">1.1.3.</span> <span class="toc-text">DO name import prefixes using lowercase_with_underscores.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-name-other-identifiers-using-lowerCamelCase"><span class="toc-number">1.1.4.</span> <span class="toc-text">DO name other identifiers using lowerCamelCase.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-lowerCamelCase-for-constant-names"><span class="toc-number">1.1.5.</span> <span class="toc-text">PREFER using lowerCamelCase for constant names.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-capitalize-acronyms-and-abbreviations-longer-than-two-letters-like-words"><span class="toc-number">1.1.6.</span> <span class="toc-text">DO capitalize acronyms and abbreviations longer than two letters like words.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-etc-for-unused-callback-parameters"><span class="toc-number">1.1.7.</span> <span class="toc-text">PREFER using _, __, etc. for unused callback parameters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-a-leading-underscore-for-identifiers-that-aren%E2%80%99t-private"><span class="toc-number">1.1.8.</span> <span class="toc-text">DON’T use a leading underscore for identifiers that aren’t private.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-prefix-letters"><span class="toc-number">1.1.9.</span> <span class="toc-text">DON’T use prefix letters.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ordering"><span class="toc-number">1.2.</span> <span class="toc-text">Ordering</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-place-%E2%80%9Cdart-%E2%80%9D-imports-before-other-imports"><span class="toc-number">1.2.1.</span> <span class="toc-text">DO place “dart:” imports before other imports.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-place-%E2%80%9Cpackage-%E2%80%9D-imports-before-relative-imports"><span class="toc-number">1.2.2.</span> <span class="toc-text">DO place “package:” imports before relative imports.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-specify-exports-in-a-separate-section-after-all-imports"><span class="toc-number">1.2.3.</span> <span class="toc-text">DO specify exports in a separate section after all imports.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-sort-sections-alphabetically"><span class="toc-number">1.2.4.</span> <span class="toc-text">DO sort sections alphabetically.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Formatting"><span class="toc-number">1.3.</span> <span class="toc-text">Formatting</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-format-your-code-using-dart-format"><span class="toc-number">1.3.1.</span> <span class="toc-text">DO format your code using dart format.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-changing-your-code-to-make-it-more-formatter-friendly"><span class="toc-number">1.3.2.</span> <span class="toc-text">CONSIDER changing your code to make it more formatter-friendly.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-lines-longer-than-80-characters"><span class="toc-number">1.3.3.</span> <span class="toc-text">AVOID lines longer than 80 characters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-curly-braces-for-all-flow-control-statements"><span class="toc-number">1.3.4.</span> <span class="toc-text">DO use curly braces for all flow control statements.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Documentation-Guide"><span class="toc-number">2.</span> <span class="toc-text">Documentation Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Comment"><span class="toc-number">2.1.</span> <span class="toc-text">Comment</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-format-comments-like-sentences"><span class="toc-number">2.1.1.</span> <span class="toc-text">DO format comments like sentences.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-block-comments-for-documentation"><span class="toc-number">2.1.2.</span> <span class="toc-text">DON’T use block comments for documentation.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Doc-comments"><span class="toc-number">2.2.</span> <span class="toc-text">Doc comments</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-doc-comments-to-document-members-and-types"><span class="toc-number">2.2.1.</span> <span class="toc-text">DO use &#x2F;&#x2F;&#x2F; doc comments to document members and types.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-writing-doc-comments-for-public-APIs"><span class="toc-number">2.2.2.</span> <span class="toc-text">PREFER writing doc comments for public APIs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-writing-a-library-level-doc-comment"><span class="toc-number">2.2.3.</span> <span class="toc-text">CONSIDER writing a library-level doc comment.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-writing-doc-comments-for-private-APIs"><span class="toc-number">2.2.4.</span> <span class="toc-text">CONSIDER writing doc comments for private APIs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-start-doc-comments-with-a-single-sentence-summary"><span class="toc-number">2.2.5.</span> <span class="toc-text">DO start doc comments with a single-sentence summary.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-separate-the-first-sentence-of-a-doc-comment-into-its-own-paragraph"><span class="toc-number">2.2.6.</span> <span class="toc-text">DO separate the first sentence of a doc comment into its own paragraph.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-redundancy-with-the-surrounding-context"><span class="toc-number">2.2.7.</span> <span class="toc-text">AVOID redundancy with the surrounding context.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-starting-function-or-method-comments-with-third-person-verbs"><span class="toc-number">2.2.8.</span> <span class="toc-text">PREFER starting function or method comments with third-person verbs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-starting-variable-getter-or-setter-comments-with-noun-phrases"><span class="toc-number">2.2.9.</span> <span class="toc-text">PREFER starting variable, getter, or setter comments with noun phrases.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-starting-library-or-type-comments-with-noun-phrases"><span class="toc-number">2.2.10.</span> <span class="toc-text">PREFER starting library or type comments with noun phrases.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-including-code-samples-in-doc-comments"><span class="toc-number">2.2.11.</span> <span class="toc-text">CONSIDER including code samples in doc comments.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-square-brackets-in-doc-comments-to-refer-to-in-scope-identifiers"><span class="toc-number">2.2.12.</span> <span class="toc-text">DO use square brackets in doc comments to refer to in-scope identifiers.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-prose-to-explain-parameters-return-values-and-exceptions"><span class="toc-number">2.2.13.</span> <span class="toc-text">DO use prose to explain parameters, return values, and exceptions.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-put-doc-comments-before-metadata-annotations"><span class="toc-number">2.2.14.</span> <span class="toc-text">DO put doc comments before metadata annotations.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Markdown"><span class="toc-number">2.3.</span> <span class="toc-text">Markdown</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-markdown-excessively"><span class="toc-number">2.3.1.</span> <span class="toc-text">AVOID using markdown excessively.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-HTML-for-formatting"><span class="toc-number">2.3.2.</span> <span class="toc-text">AVOID using HTML for formatting.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-backtick-fences-for-code-blocks"><span class="toc-number">2.3.3.</span> <span class="toc-text">PREFER backtick fences for code blocks.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Writing"><span class="toc-number">2.4.</span> <span class="toc-text">Writing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-brevity"><span class="toc-number">2.4.1.</span> <span class="toc-text">PREFER brevity.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-abbreviations-and-acronyms-unless-they-are-obvious"><span class="toc-number">2.4.2.</span> <span class="toc-text">AVOID abbreviations and acronyms unless they are obvious.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-%E2%80%9Cthis%E2%80%9D-instead-of-%E2%80%9Cthe%E2%80%9D-to-refer-to-a-member%E2%80%99s-instance"><span class="toc-number">2.4.3.</span> <span class="toc-text">PREFER using “this” instead of “the” to refer to a member’s instance.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage-Guide"><span class="toc-number">3.</span> <span class="toc-text">Usage Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Libraries"><span class="toc-number">3.1.</span> <span class="toc-text">Libraries</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-strings-in-part-of-directives"><span class="toc-number">3.1.1.</span> <span class="toc-text">DO use strings in part of directives.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-import-libraries-that-are-inside-the-src-directory-of-another-package"><span class="toc-number">3.1.2.</span> <span class="toc-text">DON’T import libraries that are inside the src directory of another package.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-allow-an-import-path-to-reach-into-or-out-of-lib"><span class="toc-number">3.1.3.</span> <span class="toc-text">DON’T allow an import path to reach into or out of lib.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-relative-import-paths"><span class="toc-number">3.1.4.</span> <span class="toc-text">PREFER relative import paths.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Null"><span class="toc-number">3.2.</span> <span class="toc-text">Null</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-explicitly-initialize-variables-to-null"><span class="toc-number">3.2.1.</span> <span class="toc-text">DON’T explicitly initialize variables to null.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-an-explicit-default-value-of-null"><span class="toc-number">3.2.2.</span> <span class="toc-text">DON’T use an explicit default value of null.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-to-convert-null-to-a-boolean-value"><span class="toc-number">3.2.3.</span> <span class="toc-text">PREFER using ?? to convert null to a boolean value.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-late-variables-if-you-need-to-check-whether-they-are-initialized"><span class="toc-number">3.2.4.</span> <span class="toc-text">AVOID late variables if you need to check whether they are initialized.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-copying-a-nullable-field-to-a-local-variable-to-enable-type-promotion"><span class="toc-number">3.2.5.</span> <span class="toc-text">CONSIDER copying a nullable field to a local variable to enable type promotion.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Strings"><span class="toc-number">3.3.</span> <span class="toc-text">Strings</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-adjacent-strings-to-concatenate-string-literals"><span class="toc-number">3.3.1.</span> <span class="toc-text">DO use adjacent strings to concatenate string literals.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-interpolation-to-compose-strings-and-values"><span class="toc-number">3.3.2.</span> <span class="toc-text">PREFER using interpolation to compose strings and values.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Collections"><span class="toc-number">3.4.</span> <span class="toc-text">Collections</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-collection-literals-when-possible"><span class="toc-number">3.4.1.</span> <span class="toc-text">DO use collection literals when possible.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-length-to-see-if-a-collection-is-empty"><span class="toc-number">3.4.2.</span> <span class="toc-text">DON’T use .length to see if a collection is empty.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-Iterable-forEach-with-a-function-literal"><span class="toc-number">3.4.3.</span> <span class="toc-text">AVOID using Iterable.forEach() with a function literal.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-List-from-unless-you-intend-to-change-the-type-of-the-result"><span class="toc-number">3.4.4.</span> <span class="toc-text">DON’T use List.from() unless you intend to change the type of the result.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-whereType-to-filter-a-collection-by-type"><span class="toc-number">3.4.5.</span> <span class="toc-text">DO use whereType() to filter a collection by type.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-cast-when-a-nearby-operation-will-do"><span class="toc-number">3.4.6.</span> <span class="toc-text">DON’T use cast() when a nearby operation will do.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-cast"><span class="toc-number">3.4.7.</span> <span class="toc-text">AVOID using cast().</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Functions"><span class="toc-number">3.5.</span> <span class="toc-text">Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-a-function-declaration-to-bind-a-function-to-a-name"><span class="toc-number">3.5.1.</span> <span class="toc-text">DO use a function declaration to bind a function to a name.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-create-a-lambda-when-a-tear-off-will-do"><span class="toc-number">3.5.2.</span> <span class="toc-text">DON’T create a lambda when a tear-off will do.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-to-separate-a-named-parameter-from-its-default-value"><span class="toc-number">3.5.3.</span> <span class="toc-text">DO use &#x3D; to separate a named parameter from its default value.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Variables"><span class="toc-number">3.6.</span> <span class="toc-text">Variables</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-follow-a-consistent-rule-for-var-and-final-on-local-variables"><span class="toc-number">3.6.1.</span> <span class="toc-text">DO follow a consistent rule for var and final on local variables.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-storing-what-you-can-calculate"><span class="toc-number">3.6.2.</span> <span class="toc-text">AVOID storing what you can calculate.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Members"><span class="toc-number">3.7.</span> <span class="toc-text">Members</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-wrap-a-field-in-a-getter-and-setter-unnecessarily"><span class="toc-number">3.7.1.</span> <span class="toc-text">DON’T wrap a field in a getter and setter unnecessarily.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-a-final-field-to-make-a-read-only-property"><span class="toc-number">3.7.2.</span> <span class="toc-text">PREFER using a final field to make a read-only property.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-using-gt-for-simple-members"><span class="toc-number">3.7.3.</span> <span class="toc-text">CONSIDER using &#x3D;&gt; for simple members.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-this-except-to-redirect-to-a-named-constructor-or-to-avoid-shadowing"><span class="toc-number">3.7.4.</span> <span class="toc-text">DON’T use this. except to redirect to a named constructor or to avoid shadowing.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-initialize-fields-at-their-declaration-when-possible"><span class="toc-number">3.7.5.</span> <span class="toc-text">DO initialize fields at their declaration when possible.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Constructors"><span class="toc-number">3.8.</span> <span class="toc-text">Constructors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-initializing-formals-when-possible"><span class="toc-number">3.8.1.</span> <span class="toc-text">DO use initializing formals when possible.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-late-when-a-constructor-initializer-list-will-do"><span class="toc-number">3.8.2.</span> <span class="toc-text">DON’T use late when a constructor initializer list will do.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-instead-of-for-empty-constructor-bodies"><span class="toc-number">3.8.3.</span> <span class="toc-text">DO use ; instead of {} for empty constructor bodies.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-new"><span class="toc-number">3.8.4.</span> <span class="toc-text">DON’T use new.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-const-redundantly"><span class="toc-number">3.8.5.</span> <span class="toc-text">DON’T use const redundantly.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error-handling"><span class="toc-number">3.9.</span> <span class="toc-text">Error handling</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-catches-without-on-clauses"><span class="toc-number">3.9.1.</span> <span class="toc-text">AVOID catches without on clauses.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-discard-errors-from-catches-without-on-clauses"><span class="toc-number">3.9.2.</span> <span class="toc-text">DON’T discard errors from catches without on clauses.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-throw-objects-that-implement-Error-only-for-programmatic-errors"><span class="toc-number">3.9.3.</span> <span class="toc-text">DO throw objects that implement Error only for programmatic errors.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-explicitly-catch-Error-or-types-that-implement-it"><span class="toc-number">3.9.4.</span> <span class="toc-text">DON’T explicitly catch Error or types that implement it.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-rethrow-to-rethrow-a-caught-exception"><span class="toc-number">3.9.5.</span> <span class="toc-text">DO use rethrow to rethrow a caught exception.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Asynchrony"><span class="toc-number">3.10.</span> <span class="toc-text">Asynchrony</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-async-await-over-using-raw-futures"><span class="toc-number">3.10.1.</span> <span class="toc-text">PREFER async&#x2F;await over using raw futures.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-async-when-it-has-no-useful-effect"><span class="toc-number">3.10.2.</span> <span class="toc-text">DON’T use async when it has no useful effect.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-using-higher-order-methods-to-transform-a-stream"><span class="toc-number">3.10.3.</span> <span class="toc-text">CONSIDER using higher-order methods to transform a stream.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-Completer-directly"><span class="toc-number">3.10.4.</span> <span class="toc-text">AVOID using Completer directly.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-test-for-Future-lt-T-gt-when-disambiguating-a-FutureOr-lt-T-gt-whose-type-argument-could-be-Object"><span class="toc-number">3.10.5.</span> <span class="toc-text">DO test for Future&lt;T&gt; when disambiguating a FutureOr&lt;T&gt; whose type argument could be Object.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Design-Guide"><span class="toc-number">4.</span> <span class="toc-text">Design Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Names"><span class="toc-number">4.1.</span> <span class="toc-text">Names</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-terms-consistently"><span class="toc-number">4.1.1.</span> <span class="toc-text">DO use terms consistently.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-abbreviations"><span class="toc-number">4.1.2.</span> <span class="toc-text">AVOID abbreviations.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-putting-the-most-descriptive-noun-last"><span class="toc-number">4.1.3.</span> <span class="toc-text">PREFER putting the most descriptive noun last.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-making-the-code-read-like-a-sentence"><span class="toc-number">4.1.4.</span> <span class="toc-text">CONSIDER making the code read like a sentence.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-a-noun-phrase-for-a-non-boolean-property-or-variable"><span class="toc-number">4.1.5.</span> <span class="toc-text">PREFER a noun phrase for a non-boolean property or variable.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-a-non-imperative-verb-phrase-for-a-boolean-property-or-variable"><span class="toc-number">4.1.6.</span> <span class="toc-text">PREFER a non-imperative verb phrase for a boolean property or variable.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-omitting-the-verb-for-a-named-boolean-parameter"><span class="toc-number">4.1.7.</span> <span class="toc-text">CONSIDER omitting the verb for a named boolean parameter.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-the-%E2%80%9Cpositive%E2%80%9D-name-for-a-boolean-property-or-variable"><span class="toc-number">4.1.8.</span> <span class="toc-text">PREFER the “positive” name for a boolean property or variable.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-an-imperative-verb-phrase-for-a-function-or-method-whose-main-purpose-is-a-side-effect"><span class="toc-number">4.1.9.</span> <span class="toc-text">PREFER an imperative verb phrase for a function or method whose main purpose is a side effect.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose"><span class="toc-number">4.1.10.</span> <span class="toc-text">PREFER a noun phrase or non-imperative verb phrase for a function or method if returning a value is its primary purpose.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs"><span class="toc-number">4.1.11.</span> <span class="toc-text">CONSIDER an imperative verb phrase for a function or method if you want to draw attention to the work it performs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-starting-a-method-name-with-get"><span class="toc-number">4.1.12.</span> <span class="toc-text">AVOID starting a method name with get.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-naming-a-method-toXxx-if-it-copies-the-object%E2%80%99s-state-to-a-new-object"><span class="toc-number">4.1.13.</span> <span class="toc-text">PREFER naming a method toXxx() if it copies the object’s state to a new object.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-naming-a-method-asXxx-if-it-returns-a-different-representation-backed-by-the-original-object"><span class="toc-number">4.1.14.</span> <span class="toc-text">PREFER naming a method asXxx() if it returns a different representation backed by the original object.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-describing-the-parameters-in-the-function%E2%80%99s-or-method%E2%80%99s-name"><span class="toc-number">4.1.15.</span> <span class="toc-text">AVOID describing the parameters in the function’s or method’s name.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-follow-existing-mnemonic-conventions-when-naming-type-parameters"><span class="toc-number">4.1.16.</span> <span class="toc-text">DO follow existing mnemonic conventions when naming type parameters.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Libraries-1"><span class="toc-number">4.2.</span> <span class="toc-text">Libraries</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-making-declarations-private"><span class="toc-number">4.2.1.</span> <span class="toc-text">PREFER making declarations private.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-declaring-multiple-classes-in-the-same-library"><span class="toc-number">4.2.2.</span> <span class="toc-text">CONSIDER declaring multiple classes in the same library.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Classes-and-mixins"><span class="toc-number">4.3.</span> <span class="toc-text">Classes and mixins</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-defining-a-one-member-abstract-class-when-a-simple-function-will-do"><span class="toc-number">4.3.1.</span> <span class="toc-text">AVOID defining a one-member abstract class when a simple function will do.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-defining-a-class-that-contains-only-static-members"><span class="toc-number">4.3.2.</span> <span class="toc-text">AVOID defining a class that contains only static members.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-extending-a-class-that-isn%E2%80%99t-intended-to-be-subclassed"><span class="toc-number">4.3.3.</span> <span class="toc-text">AVOID extending a class that isn’t intended to be subclassed.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-document-if-your-class-supports-being-extended"><span class="toc-number">4.3.4.</span> <span class="toc-text">DO document if your class supports being extended.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-implementing-a-class-that-isn%E2%80%99t-intended-to-be-an-interface"><span class="toc-number">4.3.5.</span> <span class="toc-text">AVOID implementing a class that isn’t intended to be an interface.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-document-if-your-class-supports-being-used-as-an-interface"><span class="toc-number">4.3.6.</span> <span class="toc-text">DO document if your class supports being used as an interface.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-mixin-to-define-a-mixin-type"><span class="toc-number">4.3.7.</span> <span class="toc-text">DO use mixin to define a mixin type.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-mixing-in-a-type-that-isn%E2%80%99t-intended-to-be-a-mixin"><span class="toc-number">4.3.8.</span> <span class="toc-text">AVOID mixing in a type that isn’t intended to be a mixin.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Constructors-1"><span class="toc-number">4.4.</span> <span class="toc-text">Constructors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CONSIDER-making-your-constructor-const-if-the-class-supports-it"><span class="toc-number">4.4.1.</span> <span class="toc-text">CONSIDER making your constructor const if the class supports it.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Members-1"><span class="toc-number">4.5.</span> <span class="toc-text">Members</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-making-fields-and-top-level-variables-final"><span class="toc-number">4.5.1.</span> <span class="toc-text">PREFER making fields and top-level variables final.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-getters-for-operations-that-conceptually-access-properties"><span class="toc-number">4.5.2.</span> <span class="toc-text">DO use getters for operations that conceptually access properties.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-setters-for-operations-that-conceptually-change-properties"><span class="toc-number">4.5.3.</span> <span class="toc-text">DO use setters for operations that conceptually change properties.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-define-a-setter-without-a-corresponding-getter"><span class="toc-number">4.5.4.</span> <span class="toc-text">DON’T define a setter without a corresponding getter.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-runtime-type-tests-to-fake-overloading"><span class="toc-number">4.5.5.</span> <span class="toc-text">AVOID using runtime type tests to fake overloading.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-public-late-final-fields-without-initializers"><span class="toc-number">4.5.6.</span> <span class="toc-text">AVOID public late final fields without initializers.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-returning-nullable-Future-Stream-and-collection-types"><span class="toc-number">4.5.7.</span> <span class="toc-text">AVOID returning nullable Future, Stream, and collection types.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-returning-this-from-methods-just-to-enable-a-fluent-interface"><span class="toc-number">4.5.8.</span> <span class="toc-text">AVOID returning this from methods just to enable a fluent interface.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Types"><span class="toc-number">4.6.</span> <span class="toc-text">Types</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Type-inference"><span class="toc-number">4.6.1.</span> <span class="toc-text">Type inference</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-type-annotate-variables-without-initializers"><span class="toc-number">4.6.2.</span> <span class="toc-text">DO type annotate variables without initializers.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-type-annotate-fields-and-top-level-variables-if-the-type-isn%E2%80%99t-obvious"><span class="toc-number">4.6.3.</span> <span class="toc-text">DO type annotate fields and top-level variables if the type isn’t obvious.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-redundantly-type-annotate-initialized-local-variables"><span class="toc-number">4.6.4.</span> <span class="toc-text">DON’T redundantly type annotate initialized local variables.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-annotate-return-types-on-function-declarations"><span class="toc-number">4.6.5.</span> <span class="toc-text">DO annotate return types on function declarations.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-annotate-parameter-types-on-function-declarations"><span class="toc-number">4.6.6.</span> <span class="toc-text">DO annotate parameter types on function declarations.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-annotate-inferred-parameter-types-on-function-expressions"><span class="toc-number">4.6.7.</span> <span class="toc-text">DON’T annotate inferred parameter types on function expressions.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-type-annotate-initializing-formals"><span class="toc-number">4.6.8.</span> <span class="toc-text">DON’T type annotate initializing formals.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-write-type-arguments-on-generic-invocations-that-aren%E2%80%99t-inferred"><span class="toc-number">4.6.9.</span> <span class="toc-text">DO write type arguments on generic invocations that aren’t inferred.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-write-type-arguments-on-generic-invocations-that-are-inferred"><span class="toc-number">4.6.10.</span> <span class="toc-text">DON’T write type arguments on generic invocations that are inferred.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-writing-incomplete-generic-types"><span class="toc-number">4.6.11.</span> <span class="toc-text">AVOID writing incomplete generic types.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-annotate-with-dynamic-instead-of-letting-inference-fail"><span class="toc-number">4.6.12.</span> <span class="toc-text">DO annotate with dynamic instead of letting inference fail.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-signatures-in-function-type-annotations"><span class="toc-number">4.6.13.</span> <span class="toc-text">PREFER signatures in function type annotations.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-specify-a-return-type-for-a-setter"><span class="toc-number">4.6.14.</span> <span class="toc-text">DON’T specify a return type for a setter.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-use-the-legacy-typedef-syntax"><span class="toc-number">4.6.15.</span> <span class="toc-text">DON’T use the legacy typedef syntax.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-inline-function-types-over-typedefs"><span class="toc-number">4.6.16.</span> <span class="toc-text">PREFER inline function types over typedefs.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PREFER-using-function-type-syntax-for-parameters"><span class="toc-number">4.6.17.</span> <span class="toc-text">PREFER using function type syntax for parameters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-dynamic-unless-you-want-to-disable-static-checking"><span class="toc-number">4.6.18.</span> <span class="toc-text">AVOID using dynamic unless you want to disable static checking.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-Future-lt-void-gt-as-the-return-type-of-asynchronous-members-that-do-not-produce-values"><span class="toc-number">4.6.19.</span> <span class="toc-text">DO use Future&lt;void&gt; as the return type of asynchronous members that do not produce values.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-using-FutureOr-lt-T-gt-as-a-return-type"><span class="toc-number">4.6.20.</span> <span class="toc-text">AVOID using FutureOr&lt;T&gt; as a return type.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parameters"><span class="toc-number">4.7.</span> <span class="toc-text">Parameters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-positional-boolean-parameters"><span class="toc-number">4.7.1.</span> <span class="toc-text">AVOID positional boolean parameters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-optional-positional-parameters-if-the-user-may-want-to-omit-earlier-parameters"><span class="toc-number">4.7.2.</span> <span class="toc-text">AVOID optional positional parameters if the user may want to omit earlier parameters.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-mandatory-parameters-that-accept-a-special-%E2%80%9Cno-argument%E2%80%9D-value"><span class="toc-number">4.7.3.</span> <span class="toc-text">AVOID mandatory parameters that accept a special “no argument” value.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-use-inclusive-start-and-exclusive-end-parameters-to-accept-a-range"><span class="toc-number">4.7.4.</span> <span class="toc-text">DO use inclusive start and exclusive end parameters to accept a range.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Equality"><span class="toc-number">4.8.</span> <span class="toc-text">Equality</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-override-hashCode-if-you-override"><span class="toc-number">4.8.1.</span> <span class="toc-text">DO override hashCode if you override &#x3D;&#x3D;.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DO-make-your-operator-obey-the-mathematical-rules-of-equality"><span class="toc-number">4.8.2.</span> <span class="toc-text">DO make your &#x3D;&#x3D; operator obey the mathematical rules of equality.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVOID-defining-custom-equality-for-mutable-classes"><span class="toc-number">4.8.3.</span> <span class="toc-text">AVOID defining custom equality for mutable classes.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DON%E2%80%99T-make-the-parameter-to-nullable"><span class="toc-number">4.8.4.</span> <span class="toc-text">DON’T make the parameter to &#x3D;&#x3D; nullable.</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://ajiew.me/effective-dart-notes/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://ajiew.me/effective-dart-notes/&text=Effective Dart 学习笔记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
<!--   <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li> -->
<!--   <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://ajiew.me/effective-dart-notes/&is_video=false&description=Effective Dart 学习笔记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=Effective Dart 学习笔记&body=Check out this article: https://ajiew.me/effective-dart-notes/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
<!--   <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li> -->
<!--   <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://ajiew.me/effective-dart-notes/&title=Effective Dart 学习笔记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li> -->
<!--   <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://ajiew.me/effective-dart-notes/&name=Effective Dart 学习笔记&description=&lt;p&gt;&lt;img src=&#34;/assets/2021-05-15/cover.png&#34; alt=&#34;cover&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;阅读 &lt;a href=&#34;https://dart.dev/guides/language/effective-dart&#34;&gt;Effective Dart&lt;/a&gt; 时做的一些笔记。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;Style-Guide&#34;&gt;&lt;a href=&#34;#Style-Guide&#34; class=&#34;headerlink&#34; title=&#34;Style Guide&#34;&gt;&lt;/a&gt;Style Guide&lt;/h2&gt;&lt;p&gt;好代码一定是遵循良好代码风格的代码。前后一致的命名、排序和格式化使得代码具有更高的可读性。在整个 Dart 生态中维持一个规范统一的代码风格，可以使得程序员之间分享彼此的代码时，更容易阅读和互相学习。&lt;/p&gt;
&lt;h3 id=&#34;Identifiers&#34;&gt;&lt;a href=&#34;#Identifiers&#34; class=&#34;headerlink&#34; title=&#34;Identifiers&#34;&gt;&lt;/a&gt;Identifiers&lt;/h3&gt;&lt;p&gt;Dart 中标识符有三种类型：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UpperCamelCase：大驼峰命名法，每个单词首字母大写。&lt;/li&gt;
&lt;li&gt;lowerCamelCase：小驼峰命名法，除了首个单词，其余每个单词首字母大写。&lt;/li&gt;
&lt;li&gt;lowercase_with_underscores：带下划线的小写命名法，每个单词小写，用下划线分割单词。&lt;/li&gt;
&lt;/ul&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li> -->
<!--   <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://ajiew.me/effective-dart-notes/&t=Effective Dart 学习笔记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li> -->
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2024
    aJIEw
  </div>
  <div class="footer-right">
    Find me on
    
    
    
      
        <a class="icon" target="_blank" rel="noopener" href="https://github.com/aJIEw" aria-label="github"><i class="fab fa-github"></i></a>
      
      , 
      
    
      
        <a class="icon" target="_blank" rel="noopener" href="https://twitter.com/ajiew42" aria-label="twitter"><i class="fab fa-twitter"></i></a>
      
       or 
      
    
      
        <a class="icon" target="_blank" rel="noopener" href="mailto:hi@ajiew.me" aria-label="mail"><i class="fas fa-envelope"></i></a>
      
      
      
    
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
